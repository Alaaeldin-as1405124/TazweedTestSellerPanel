{"ast":null,"code":"import _toConsumableArray from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Dropdown,Table}from\"react-bootstrap\";import baseService from\"../services/baseService\";import ConfirmationModal from\"./ConfirmationModal\";import Tab from\"react-bootstrap/Tab\";import Tabs from\"react-bootstrap/Tabs\";var Appointments=/*#__PURE__*/function(_Component){_inherits(Appointments,_Component);function Appointments(){var _getPrototypeOf2;var _this;_classCallCheck(this,Appointments);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Appointments)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={appointments:[],appointmentsFiltered:[],show:false,selectedAppointment:{},filter:'All'};_this.eventClicked=function(e){alert(e);};_this.close=function(){_this.setState({show:false});};_this.updateAppointmentStatus=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(status){var newAppointment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newAppointment=_this.state.selectedAppointment;newAppointment.status=status;_context.next=4;return baseService.updateAppointment(newAppointment);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.accept=function(){_this.updateAppointmentStatus('Accepted');_this.close();};_this.reject=function(){_this.updateAppointmentStatus('Rejected');_this.close();};_this.filter=function(filterCondition){_this.setState({filter:filterCondition});if(filterCondition===\"All\"){_this.setState({appointmentsFiltered:_this.state.appointments});return;}var appoinntments=_toConsumableArray(_this.state.appointments);appoinntments=appoinntments.filter(function(singleAppointment){if(filterCondition===\"Pending\"||filterCondition===\"Accepted\"||filterCondition===\"Rejected\")return singleAppointment.status==filterCondition;else if(filterCondition===\"Coming\")return singleAppointment.appointmentDate<new Date().toDateString();else if(filterCondition===\"Past\")return singleAppointment.appointmentDate>new Date().toDateString();else if(filterCondition===\"Today\")return singleAppointment.appointmentDate==new Date().toDateString();});_this.setState({appointmentsFiltered:appoinntments});};_this.onAppointmentClick=function(e,selectedAppointment){e.preventDefault();_this.setState({selectedAppointment:selectedAppointment,show:true});};_this.renderAppointments=function(){return React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Username\"),React.createElement(\"th\",null,\"Request Date\"),React.createElement(\"th\",null,\"Appointment Time\"),React.createElement(\"th\",null,\"Appointment Date\"),React.createElement(\"th\",null,\"Status\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,_this.state.appointmentsFiltered.length>0?_this.state.appointmentsFiltered.map(function(singleAppointment,index){return React.createElement(\"tr\",{key:index},React.createElement(\"td\",null,index+1),React.createElement(\"td\",null,singleAppointment.clientId.username),React.createElement(\"td\",null,new Date(singleAppointment.requestDate).toDateString()),React.createElement(\"td\",null,singleAppointment.time),React.createElement(\"td\",null,singleAppointment.appointmentDate),React.createElement(\"td\",null,singleAppointment.status),React.createElement(\"td\",null,singleAppointment.status!==\"Pending\"?React.createElement(\"p\",null,\"Action Taken\"):React.createElement(\"a\",{href:\"\",onClick:function onClick(e){return _this.onAppointmentClick(e,singleAppointment);}},\"Take Action\")));}):React.createElement(\"tr\",null,React.createElement(\"td\",{colSpan:7},React.createElement(\"p\",{className:'center'},\"there is no \",_this.state.filter!==\"All\"&&_this.state.filter.toLowerCase(),\" appointments yet\")))));};return _this;}_createClass(Appointments,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;baseService.getAppointments().then(function(response){_this2.setState({appointments:response,appointmentsFiltered:response});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Appointments\"),React.createElement(Dropdown,null,React.createElement(Dropdown.Toggle,{variant:\"success\",id:\"dropdown-basic\"},\"(\",this.state.filter,\") Appointments\"),React.createElement(Dropdown.Menu,null,React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('All');}},\"All\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Today');}},\"Today\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Pending');}},\"Pending\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Accepted');}},\"Accepted\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Rejected');}},\"Rejected\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Past');}},\"Past\"),React.createElement(Dropdown.Item,{onSelect:function onSelect(){return _this3.filter('Coming');}},\"Coming\"))),this.renderAppointments(),React.createElement(ConfirmationModal,{show:this.state.show,close:this.close,accept:this.accept,reject:this.reject}));}}]);return Appointments;}(Component);export default Appointments;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/TazweedTestSellerPanel/src/components/Appointments.js"],"names":["React","Component","Dropdown","Table","baseService","ConfirmationModal","Tab","Tabs","Appointments","state","appointments","appointmentsFiltered","show","selectedAppointment","filter","eventClicked","e","alert","close","setState","updateAppointmentStatus","status","newAppointment","updateAppointment","accept","reject","filterCondition","appoinntments","singleAppointment","appointmentDate","Date","toDateString","onAppointmentClick","preventDefault","renderAppointments","length","map","index","clientId","username","requestDate","time","toLowerCase","getAppointments","then","response","catch","err","console","log"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Dropdown, Table} from \"react-bootstrap\";\nimport baseService from \"../services/baseService\";\nimport ConfirmationModal from \"./ConfirmationModal\";\nimport Tab from \"react-bootstrap/Tab\";\nimport Tabs from \"react-bootstrap/Tabs\";\n\n\nclass Appointments extends Component {\n\n    state = {\n        appointments: [],\n        appointmentsFiltered: [],\n        show: false,\n        selectedAppointment: {},\n        filter: 'All'\n    };\n\n    componentWillMount() {\n        baseService.getAppointments().then((response) => {\n            this.setState({appointments: response, appointmentsFiltered: response})\n        }).catch(err => console.log(err))\n    }\n\n    eventClicked = (e) => {\n        alert(e);\n    }\n\n    close = () => {\n        this.setState({show: false})\n    };\n    updateAppointmentStatus = async (status) => {\n        let newAppointment = this.state.selectedAppointment;\n        newAppointment.status = status;\n        await baseService.updateAppointment(newAppointment);\n    }\n    accept = () => {\n        this.updateAppointmentStatus('Accepted')\n        this.close();\n    }\n    reject = () => {\n        this.updateAppointmentStatus('Rejected')\n        this.close();\n    }\n\n    filter = (filterCondition) => {\n        this.setState({filter:filterCondition});\n        if(filterCondition === \"All\")\n        {\n            this.setState({appointmentsFiltered: this.state.appointments});\n            return;\n        }\n        let appoinntments = [...this.state.appointments];\n        appoinntments = appoinntments.filter((singleAppointment) => {\n            if (filterCondition === \"Pending\" || filterCondition === \"Accepted\" || filterCondition === \"Rejected\")\n                return singleAppointment.status == filterCondition;\n            else if (filterCondition === \"Coming\")\n                return singleAppointment.appointmentDate < new Date().toDateString();\n            else if (filterCondition === \"Past\")\n                return singleAppointment.appointmentDate > new Date().toDateString()\n            else if (filterCondition === \"Today\")\n                return singleAppointment.appointmentDate == new Date().toDateString()\n        })\n        this.setState({appointmentsFiltered: appoinntments})\n\n    };\n    onAppointmentClick = (e,selectedAppointment) => {\n        e.preventDefault();\n        this.setState({selectedAppointment, show: true})\n\n    }\n    renderAppointments = () => {\n        return (\n            <Table striped bordered hover>\n                <thead>\n                <tr>\n                    <th>#</th>\n                    <th>Username</th>\n                    <th>Request Date</th>\n                    <th>Appointment Time</th>\n                    <th>Appointment Date</th>\n                    <th>Status</th>\n                    <th>Actions</th>\n                </tr>\n                </thead>\n                <tbody>\n                {this.state.appointmentsFiltered.length > 0 ? this.state.appointmentsFiltered.map((singleAppointment, index) => {\n                    return (\n\n                        <tr key={index}>\n                            <td>{index + 1}</td>\n                            <td>{singleAppointment.clientId.username}</td>\n                            <td>{new Date(singleAppointment.requestDate).toDateString()}</td>\n                            <td>{singleAppointment.time}</td>\n                            <td>{singleAppointment.appointmentDate}</td>\n                            <td>{singleAppointment.status}</td>\n                            <td>{singleAppointment.status !==\"Pending\" ?\n                                <p>Action Taken</p>:\n                                <a href='' onClick={(e) => this.onAppointmentClick(e,singleAppointment)}>Take Action</a>}\n                            </td>\n                        </tr>\n                    )\n                }) : <tr>\n                    <td colSpan={7}>\n                        <p className={'center'}>there is no {this.state.filter !==\"All\" && this.state.filter.toLowerCase()} appointments yet</p>\n                    </td>\n                </tr>}\n                </tbody>\n            </Table>\n        )\n    }\n\n\n    render() {\n        return (\n            <div>\n                <h2>Appointments</h2>\n\n                <Dropdown>\n                    <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">\n                        ({this.state.filter}) Appointments\n                    </Dropdown.Toggle>\n\n                    <Dropdown.Menu>\n                        <Dropdown.Item onSelect={()=>this.filter('All')} >All</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Today')} >Today</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Pending')} >Pending</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Accepted')} >Accepted</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Rejected')} >Rejected</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Past')} >Past</Dropdown.Item>\n                        <Dropdown.Item onSelect={()=>this.filter('Coming')} >Coming</Dropdown.Item>\n                    </Dropdown.Menu>\n                </Dropdown>\n\n                {this.renderAppointments()}\n\n                <ConfirmationModal show={this.state.show} close={this.close} accept={this.accept} reject={this.reject}/>\n            </div>\n        );\n    }\n}\n\nexport default Appointments;\n\n"]},"metadata":{},"sourceType":"module"}
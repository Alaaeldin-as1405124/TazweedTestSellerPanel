{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import baseService from'../services/baseService';import{Button,Form,Modal,Table}from\"react-bootstrap\";import AddLocation from\"./AddLocation\";import{confirmAlert}from\"react-confirm-alert\";import'react-confirm-alert/src/react-confirm-alert.css';// Import css\nvar Locations=/*#__PURE__*/function(_Component){_inherits(Locations,_Component);function Locations(){var _getPrototypeOf2;var _this;_classCallCheck(this,Locations);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Locations)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={locations:[],loading:true,modal:false,index:-1,edit:false};_this.fetchLocations=function(){baseService.getLocations().then(function(locations){_this.setState({locations:locations,loading:false});}).catch(function(err){return console.log(err);});};_this.alert=function(title){confirmAlert({title:''+title,message:'',buttons:[{label:'Dismiss'}]});};_this.addLocation=function(){};_this.removeLocation=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(location){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure you want to delete this location?\")){_context.next=5;break;}_context.next=3;return baseService.deleteLocation(location);case 3:response=_context.sent;if(response){_this.fetchLocations();//reload\n}else{_this.alert('failed to delete the location');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Locations,[{key:\"componentWillMount\",value:function componentWillMount(){this.fetchLocations();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Locations\"),React.createElement(Button,{variant:\"success\",onClick:function onClick(){return _this2.setState({modal:true});}},React.createElement(\"i\",{className:\"fa fa-plus\"}),\" Add Location\"),React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"Name Ar\"),React.createElement(\"th\",null,\"Desc\"),React.createElement(\"th\",null,\"Desc Ar\"),React.createElement(\"th\",null,\"Social Media\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,this.state.locations.map(function(location,index){return React.createElement(\"tr\",null,React.createElement(\"td\",null,index),React.createElement(\"td\",null,location.name),React.createElement(\"td\",null,location.nameAr),React.createElement(\"td\",null,location.desc),React.createElement(\"td\",null,location.descAr),React.createElement(\"td\",null,location.socialMedia.map(function(singleSocialMedia){return React.createElement(\"div\",null,singleSocialMedia.link);})),React.createElement(\"td\",null,React.createElement(\"i\",{className:\"fa fa-trash fa-2x\",style:{color:'red'},onClick:function onClick(){return _this2.removeLocation(location);}}),React.createElement(\"i\",{className:\"fa fa-edit fa-2x\",style:{color:'green'},onClick:function onClick(){return _this2.setState({index:index,edit:true,modal:true});}})));}))),React.createElement(AddLocationModal,{modal:this.state.modal,location:this.state.locations[this.state.index],edit:this.state.edit,updateLocation:function updateLocation(){_this2.fetchLocations();_this2.setState({modal:false,edit:false,index:-1});},handleClose:function handleClose(){_this2.fetchLocations();_this2.setState({modal:false});}}));}}]);return Locations;}(Component);export default Locations;var AddLocationModal=/*#__PURE__*/function(_Component2){_inherits(AddLocationModal,_Component2);function AddLocationModal(){var _getPrototypeOf3;var _this3;_classCallCheck(this,AddLocationModal);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this3=_possibleConstructorReturn(this,(_getPrototypeOf3=_getPrototypeOf(AddLocationModal)).call.apply(_getPrototypeOf3,[this].concat(args)));_this3.state={modal:false,edit:false,location:{},title:'Add'};_this3.handleClose=function(){_this3.setState({modal:false});if(_this3.props&&_this3.props.updateLocation)_this3.props.updateLocation();else{_this3.props.handleClose();}};_this3.handleShow=function(){return _this3.setState({modal:true});};return _this3;}_createClass(AddLocationModal,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){//console.log(\"i;m recving \",nextProps)\nthis.setState({modal:nextProps.modal,edit:nextProps.edit,title:'Add'});if(nextProps.edit){if(nextProps.location){this.setState({title:'Edit',edit:true,location:nextProps.location});}}}},{key:\"render\",value:function render(){return React.createElement(React.Fragment,null,React.createElement(Modal,{show:this.state.modal,onHide:this.handleClose,size:\"lg\"},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,this.state.title,\" Location\")),React.createElement(Modal.Body,null,React.createElement(AddLocation,{edit:this.state.edit,location:this.state.location,updateLocation:this.props.updateLocation,handleClose:this.handleClose}))));}}]);return AddLocationModal;}(Component);","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Locations.js"],"names":["React","Component","baseService","Button","Form","Modal","Table","AddLocation","confirmAlert","Locations","state","locations","loading","modal","index","edit","fetchLocations","getLocations","then","setState","catch","err","console","log","alert","title","message","buttons","label","addLocation","removeLocation","location","window","confirm","deleteLocation","response","map","name","nameAr","desc","descAr","socialMedia","singleSocialMedia","link","color","AddLocationModal","handleClose","props","updateLocation","handleShow","nextProps","nextContext"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport baseService from '../services/baseService'\nimport {Button, Form, Modal, Table} from \"react-bootstrap\";\nimport AddLocation from \"./AddLocation\";\nimport {confirmAlert} from \"react-confirm-alert\";\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nclass Locations extends Component {\n    state = {\n        locations: [],\n        loading: true,\n        modal: false,\n        index: -1,\n        edit: false,\n\n    }\n\n    componentWillMount() {\n        this.fetchLocations();\n    }\n\n    fetchLocations = () => {\n        baseService.getLocations().then((locations) => {\n            this.setState({locations, loading: false})\n        }).catch((err) => console.log(err))\n    }\n\n    alert = (title) => {\n        confirmAlert({\n            title: '' + title,\n            message: '',\n            buttons: [{label: 'Dismiss'}]\n        });\n    };\n    addLocation = () => {\n\n    };\n    removeLocation = async (location) => {\n        if (window.confirm(\"Are you sure you want to delete this location?\")) {\n            let response = await baseService.deleteLocation(location);\n            if (response) {\n                this.fetchLocations();//reload\n            } else {\n                this.alert('failed to delete the location')\n            }\n        }\n\n\n    };\n\n    render() {\n\n        return (\n            <div>\n                <h2>Locations</h2>\n                <Button variant=\"success\" onClick={() => this.setState({modal: true})}>\n                    <i className=\"fa fa-plus\"/> Add Location\n                </Button>\n\n                <Table striped bordered hover>\n                    <thead>\n                    <tr>\n                        <th>#</th>\n                        <th>Name</th>\n                        <th>Name Ar</th>\n                        <th>Desc</th>\n                        <th>Desc Ar</th>\n                        <th>Social Media</th>\n                        <th>Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.locations.map((location, index) => {\n                        return (\n                            <tr>\n                                <td>{index}</td>\n                                <td>{location.name}</td>\n                                <td>{location.nameAr}</td>\n                                <td>{location.desc}</td>\n                                <td>{location.descAr}</td>\n                                <td>{location.socialMedia.map((singleSocialMedia) => {\n                                    return (\n                                        <div>{singleSocialMedia.link}</div>\n                                    )\n                                })}</td>\n                                <td>\n                                    <i className=\"fa fa-trash fa-2x\" style={{color: 'red'}}\n                                       onClick={() => this.removeLocation(location)}/>\n                                    <i className=\"fa fa-edit fa-2x\" style={{color: 'green'}}\n                                       onClick={() => this.setState({index, edit: true, modal: true})}/>\n                                </td>\n\n                            </tr>\n                        )\n\n                    })}\n\n                    </tbody>\n                </Table>\n                <AddLocationModal modal={this.state.modal} location={this.state.locations[this.state.index]}\n                                  edit={this.state.edit}\n                                  updateLocation={() => {\n                                      this.fetchLocations();\n                                      this.setState({modal: false, edit: false, index: -1});\n\n                                  }}\n                                  handleClose={() => {\n                                      this.fetchLocations();\n                                      this.setState({modal: false});\n\n                                  }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Locations;\n\nclass AddLocationModal extends Component {\n    state = {\n        modal: false,\n        edit: false,\n        location: {},\n        title: 'Add'\n\n    }\n\n    handleClose = () => {\n        this.setState({modal: false});\n        if (this.props && this.props.updateLocation)\n            this.props.updateLocation();\n        else {\n            this.props.handleClose()\n        }\n    }\n    handleShow = () => this.setState({modal: true});\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        //console.log(\"i;m recving \",nextProps)\n        this.setState({modal: nextProps.modal, edit: nextProps.edit, title: 'Add'})\n        if (nextProps.edit) {\n            if (nextProps.location) {\n                this.setState({title: 'Edit', edit: true, location: nextProps.location});\n            }\n        }\n    }\n\n    render() {\n        return (\n            <>\n\n                <Modal show={this.state.modal} onHide={this.handleClose} size=\"lg\">\n                    <Modal.Header closeButton>\n                        <Modal.Title>{this.state.title} Location</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <AddLocation edit={this.state.edit} location={this.state.location}\n                                     updateLocation={this.props.updateLocation}\n                                     handleClose={this.handleClose}\n                        />\n                    </Modal.Body>\n\n                </Modal>\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
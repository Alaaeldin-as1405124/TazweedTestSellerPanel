{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import baseService from'../services/baseService';import{Button,Form,Modal,Table}from\"react-bootstrap\";import AddPlace from\"./AddPlace\";import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';// Import css\nvar Places=/*#__PURE__*/function(_Component){_inherits(Places,_Component);function Places(){var _getPrototypeOf2;var _this;_classCallCheck(this,Places);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Places)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={places:[],loading:true,modal:false,index:-1,edit:false};_this.fetchPlaces=function(){baseService.getPlaces().then(function(places){_this.setState({places:places,loading:false});}).catch(function(err){return console.log(err);});};_this.addLocation=function(){};_this.alert=function(title){confirmAlert({title:''+title,message:'',buttons:[{label:'Dismiss'}]});};_this.removePlace=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(place){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!window.confirm(\"Are you sure you want to delete this place?\")){_context.next=5;break;}_context.next=3;return baseService.deletePlace(place);case 3:response=_context.sent;if(response){_this.fetchPlaces();//reload\n}else{_this.alert('failed to delete the place');}case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();return _this;}_createClass(Places,[{key:\"componentWillMount\",value:function componentWillMount(){this.fetchPlaces();}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Places/Companies\"),React.createElement(Button,{variant:\"success\",onClick:function onClick(){return _this2.setState({modal:true});}},React.createElement(\"i\",{className:\"fa fa-plus\"}),\" Add Place\"),React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Name\"),React.createElement(\"th\",null,\"Name Ar\"),React.createElement(\"th\",null,\"Desc\"),React.createElement(\"th\",null,\"Desc Ar\"),React.createElement(\"th\",null,\"Social Media\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,this.state.places.map(function(place,index){return React.createElement(\"tr\",null,React.createElement(\"td\",null,index),React.createElement(\"td\",null,place.name),React.createElement(\"td\",null,place.nameAr),React.createElement(\"td\",null,place.desc),React.createElement(\"td\",null,place.descAr),React.createElement(\"td\",null,place.socialMedia&&place.socialMedia.map(function(singleSocialMedia){return React.createElement(\"div\",null,singleSocialMedia.link);})),React.createElement(\"td\",null,React.createElement(\"i\",{className:\"fa fa-trash fa-2x\",style:{color:'red'},onClick:function onClick(){return _this2.removePlace(place);}}),React.createElement(\"i\",{className:\"fa fa-edit fa-2x\",style:{color:'green'},onClick:function onClick(){return _this2.setState({index:index,edit:true,modal:true});}})));}))),React.createElement(AddPlaceModal,{modal:this.state.modal,place:this.state.places[this.state.index],edit:this.state.edit,updatePlace:function updatePlace(){_this2.fetchPlaces();_this2.setState({modal:false,edit:false,index:-1});},handleClose:function handleClose(){_this2.fetchPlaces();_this2.setState({modal:false});}}));}}]);return Places;}(Component);export default Places;var AddPlaceModal=/*#__PURE__*/function(_Component2){_inherits(AddPlaceModal,_Component2);function AddPlaceModal(){var _getPrototypeOf3;var _this3;_classCallCheck(this,AddPlaceModal);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this3=_possibleConstructorReturn(this,(_getPrototypeOf3=_getPrototypeOf(AddPlaceModal)).call.apply(_getPrototypeOf3,[this].concat(args)));_this3.state={modal:false,edit:false,place:{},title:'Add'};_this3.handleClose=function(){_this3.setState({modal:false});if(_this3.props&&_this3.props.updatePlace)_this3.props.updatePlace();else{_this3.props.handleClose();}};_this3.handleShow=function(){return _this3.setState({modal:true});};return _this3;}_createClass(AddPlaceModal,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){//console.log(\"i;m recving \",nextProps)\nthis.setState({modal:nextProps.modal,edit:nextProps.edit,title:'Add'});if(nextProps.edit){if(nextProps.place){this.setState({title:'Edit',edit:true,place:nextProps.place});}}}},{key:\"render\",value:function render(){return React.createElement(React.Fragment,null,React.createElement(Modal,{show:this.state.modal,onHide:this.handleClose,size:\"lg\"},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,this.state.title,\" Place\")),React.createElement(Modal.Body,null,React.createElement(AddPlace,{edit:this.state.edit,place:this.state.place,updatePlace:this.props.updatePlace,handleClose:this.handleClose}))));}}]);return AddPlaceModal;}(Component);","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Places.js"],"names":["React","Component","baseService","Button","Form","Modal","Table","AddPlace","confirmAlert","Places","state","places","loading","modal","index","edit","fetchPlaces","getPlaces","then","setState","catch","err","console","log","addLocation","alert","title","message","buttons","label","removePlace","place","window","confirm","deletePlace","response","map","name","nameAr","desc","descAr","socialMedia","singleSocialMedia","link","color","AddPlaceModal","handleClose","props","updatePlace","handleShow","nextProps","nextContext"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport baseService from '../services/baseService'\nimport {Button, Form, Modal, Table} from \"react-bootstrap\";\nimport AddPlace from \"./AddPlace\";\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nclass Places extends Component {\n    state = {\n        places: [],\n        loading: true,\n        modal: false,\n        index: -1,\n        edit: false,\n\n    }\n\n    componentWillMount() {\n        this.fetchPlaces();\n    }\n\n    fetchPlaces = () => {\n        baseService.getPlaces().then((places) => {\n            this.setState({places, loading: false})\n        }).catch((err) => console.log(err))\n    };\n\n    addLocation = () => {\n\n    };\n\n    alert = (title) => {\n        confirmAlert({\n            title: '' + title,\n            message: '',\n            buttons: [{label: 'Dismiss'}]\n        });\n    };\n\n    removePlace = async (place) => {\n        if (window.confirm(\"Are you sure you want to delete this place?\")){\n            let response = await baseService.deletePlace(place);\n            if (response) {\n                this.fetchPlaces();//reload\n            } else {\n                this.alert('failed to delete the place')\n            }\n        }\n\n\n    };\n\n    render() {\n\n        return (\n            <div>\n                <h2>Places/Companies</h2>\n                <Button variant=\"success\" onClick={() => this.setState({modal: true})}>\n                    <i className=\"fa fa-plus\"/> Add Place\n                </Button>\n\n                <Table striped bordered hover>\n                    <thead>\n                    <tr>\n                        <th>#</th>\n                        <th>Name</th>\n                        <th>Name Ar</th>\n                        <th>Desc</th>\n                        <th>Desc Ar</th>\n                        <th>Social Media</th>\n                        <th>Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.places.map((place, index) => {\n                        return (\n                            <tr>\n                                <td>{index}</td>\n                                <td>{place.name}</td>\n                                <td>{place.nameAr}</td>\n                                <td>{place.desc}</td>\n                                <td>{place.descAr}</td>\n                                <td>{place.socialMedia && place.socialMedia.map((singleSocialMedia) => {\n                                    return (\n                                        <div>{singleSocialMedia.link}</div>\n                                    )\n                                })}</td>\n                                <td>\n                                    <i className=\"fa fa-trash fa-2x\" style={{color: 'red'}}\n                                       onClick={() => this.removePlace(place)}/>\n                                    <i className=\"fa fa-edit fa-2x\" style={{color: 'green'}}\n                                       onClick={() => this.setState({index, edit: true, modal: true})}/>\n                                </td>\n\n                            </tr>\n                        )\n\n                    })}\n\n                    </tbody>\n                </Table>\n                <AddPlaceModal modal={this.state.modal}\n                               place={this.state.places[this.state.index]}\n                               edit={this.state.edit}\n                               updatePlace={() => {\n                                   this.fetchPlaces();\n                                   this.setState({modal: false, edit: false, index: -1});\n                               }}\n                               handleClose={() => {\n                                   this.fetchPlaces();\n                                   this.setState({modal: false});\n                               }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Places;\n\nclass AddPlaceModal extends Component {\n    state = {\n        modal: false,\n        edit: false,\n        place: {},\n        title: 'Add'\n\n    }\n\n  /*\n    searchPlacesAr = (searchText) =>{\n        //validate the input\n        if(searchText && searchText !== ''){\n            let matchingPlaces = [];\n            this.state.places.map((place) =>{\n                //we check if we got a match\n                if(place.nameAr.includes(searchText))\n                    matchingPlaces.push(place);//if yes just add it to the array\n            })\n            //after finishing the mapping we do update state to show the result\n            this.setState({placesFiltered:matchingPlaces})\n        }\n        else{\n            //search input is empty or undefined we get back the original list\n            this.setState({placesFiltered:this.state.originaPlaceslList})\n        }\n\n\n    };\n     */\n\n    handleClose = () => {\n        this.setState({modal: false});\n        if (this.props && this.props.updatePlace)\n            this.props.updatePlace();\n        else {\n            this.props.handleClose()\n        }\n    }\n    handleShow = () => this.setState({modal: true});\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        //console.log(\"i;m recving \",nextProps)\n        this.setState({modal: nextProps.modal, edit: nextProps.edit, title: 'Add'});\n        if (nextProps.edit) {\n            if (nextProps.place) {\n                this.setState({title: 'Edit', edit: true, place: nextProps.place});\n            }\n        }\n    }\n\n    render() {\n        return (\n            <>\n\n                <Modal show={this.state.modal} onHide={this.handleClose} size=\"lg\">\n                    <Modal.Header closeButton>\n                        <Modal.Title>{this.state.title} Place</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <AddPlace edit={this.state.edit}\n                                  place={this.state.place}\n                                  updatePlace={this.props.updatePlace}\n                                  handleClose={this.handleClose}\n                        />\n                    </Modal.Body>\n\n                </Modal>\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
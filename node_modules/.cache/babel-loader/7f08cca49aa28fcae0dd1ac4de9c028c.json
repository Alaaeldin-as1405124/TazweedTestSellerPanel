{"ast":null,"code":"import _defineProperty from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Tabs,Tab,ListGroup,Button,Form,Col,FormControl}from'react-bootstrap';import FormData from'form-data';import DragableList from\"../customComponents/DragableList\";import baseService from\"../services/baseService\";import SortableList from\"../customComponents/SortableList\";var Media=/*#__PURE__*/function(_Component){_inherits(Media,_Component);function Media(props){var _this;_classCallCheck(this,Media);_this=_possibleConstructorReturn(this,_getPrototypeOf(Media).call(this,props));_this._handleImageChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var filesArray,formData,response,filesFetched,files;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();filesArray=Array.from(e.target.files);formData=new FormData();filesArray.map(function(singleFile){formData.append('files[]',singleFile);});_context.next=6;return fetch(baseService.getApiUrl()+'/uploadMulti',{method:'POST',body:formData,headers:{'Authorization':baseService.getToken()}});case 6:response=_context.sent;if(!response.ok){_context.next=22;break;}_context.prev=8;_context.next=11;return response.json();case 11:filesFetched=_context.sent;files=_toConsumableArray(_this.state.files);filesFetched.map(function(singleFile){files.push(singleFile);});_this.setState({files:files},function(){return _this.update();});_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](8);console.log(_context.t0);case 20:_context.next=23;break;case 22:console.log('response not ok ',response);case 23:case\"end\":return _context.stop();}}},_callee,null,[[8,17]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.update=function(){if(_this.props&&_this.props.updateMedia){_this.props.updateMedia(_this.state.files);}};_this.removeImageFile=function(index){var files=_toConsumableArray(_this.state.files);files.splice(index,1);_this.setState({files:files},function(){_this.update();});};_this.addExternalLink=function(){//check video type and send it to the server\nif(_this.state.externalLink!==''){//check if it's a valid link\nvar link=_this.state.externalLink.toString().toLowerCase();if(link.includes('.mp4')||link.includes('youtube')||link.match(/\\.(jpeg|jpg|gif|png)$/)){var type=link.includes('.mp4')||link.includes('youtube')?'video':'image';var files=_toConsumableArray(_this.state.files);files.push({link:_this.state.externalLink,type:type});//let extention = link.substr(link.lastIndexOf('.')+1,link.length)\n//console.log(extention)\n_this.setState({externalLink:'',files:files},function(){_this.update();});}else{alert('invalid video/image url (Accepting MP4 or Youtube link');return;}}else alert('Please fill video link first');};_this.onChange=function(key,e){_this.setState(_defineProperty({},key,e.target.value));};_this.state={files:[],imageUrls:[],videoUrls:[],type:'image',externalLink:''};_this._handleImageChange=_this._handleImageChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Media,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){if(nextProps.media){console.log('@media will rev props ',nextProps.media);this.setState({files:nextProps.media});}}},{key:\"componentWillMount\",value:function componentWillMount(){if(this.props.media){this.setState({files:this.props.media});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Media\")),React.createElement(Tabs,{id:\"controlled-tab-example\",activeKey:this.state.type,onSelect:function onSelect(k){return _this2.setState({type:k});}},React.createElement(Tab,{eventKey:\"image\",title:\"Upload\"},React.createElement(\"form\",null,React.createElement(\"input\",{type:\"file\",onChange:this._handleImageChange,multiple:true}))),React.createElement(Tab,{eventKey:\"video\",title:\"External Link\"},React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Add External Link\"),React.createElement(Form.Row,null,React.createElement(Form.Group,{as:Col},React.createElement(Form.Control,{type:\"text\",placeholder:\"Video/Image Link (Youtube or external media link) MP4\",onChange:function onChange(e){return _this2.onChange('externalLink',e);},value:this.state.externalLink})),React.createElement(Form.Group,{as:Col,className:'center'},React.createElement(Button,{className:\"badge-info col-6\",onClick:function onClick(){return _this2.addExternalLink();}},React.createElement(\"i\",{className:\"fa fa-plus\"}),\" Add\")))))),React.createElement(SortableList,{items:this.state.files,renderItem:function renderItem(file,index){return React.createElement(\"div\",null,React.createElement(ListGroup.Item,null,React.createElement(\"div\",{className:'row'},React.createElement(\"div\",{className:'col'},file.type.includes('video')&&!file.link.toString().toLowerCase().includes('youtube')?React.createElement(\"video\",{style:{width:200,height:250,padding:5},controls:true},React.createElement(\"source\",{src:file.link,type:'video/'+file.link.substr(file.link.lastIndexOf('.')+1,file.link.length)}),\"Your browser does not support HTML5 video.\"):file.type.includes('video')&&file.link.toString().toLowerCase().includes('youtube')&&React.createElement(\"iframe\",{width:\"200\",height:\"250\",src:file.link.replace('watch?v=','embed/').split('&')[0],frameBorder:\"0\",allow:\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:true}),file.type.includes('image')&&React.createElement(\"img\",{style:{width:100,height:100,padding:5},src:file.link})),React.createElement(Button,{variant:\"danger\",onClick:function onClick(){return _this2.removeImageFile(index);}},\"Remove\"))));},reOrder:function reOrder(files){//prevent issue when removing\nif(_this2.state.files.length===files.length){if(files[0].type==='image'){_this2.setState({files:files},function(){_this2.update();});}else{alert('The first item must be an image');}}}}));}}]);return Media;}(Component);export default Media;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Media.js"],"names":["React","Component","Tabs","Tab","ListGroup","Button","Form","Col","FormControl","FormData","DragableList","baseService","SortableList","Media","props","_handleImageChange","e","preventDefault","filesArray","Array","from","target","files","formData","map","singleFile","append","fetch","getApiUrl","method","body","headers","getToken","response","ok","json","filesFetched","state","push","setState","update","console","log","updateMedia","removeImageFile","index","splice","addExternalLink","externalLink","link","toString","toLowerCase","includes","match","type","alert","onChange","key","value","imageUrls","videoUrls","bind","nextProps","nextContext","media","k","file","width","height","padding","substr","lastIndexOf","length","replace","split"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Tabs, Tab, ListGroup, Button, Form, Col, FormControl} from 'react-bootstrap'\nimport FormData from 'form-data';\nimport DragableList from \"../customComponents/DragableList\";\nimport baseService from \"../services/baseService\";\nimport SortableList from \"../customComponents/SortableList\";\n\nclass Media extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n            imageUrls: [],\n            videoUrls: [],\n            type: 'image',\n            externalLink: '',\n        };\n        this._handleImageChange = this._handleImageChange.bind(this);\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n\n        if (nextProps.media) {\n            console.log('@media will rev props ',nextProps.media)\n            this.setState({files: nextProps.media})\n        }\n    }\n\n    componentWillMount() {\n        if (this.props.media) {\n            this.setState({files: this.props.media})\n        }\n    }\n\n\n    _handleImageChange = async (e) => {\n        e.preventDefault();\n        let filesArray = Array.from(e.target.files);\n        const formData = new FormData();\n        filesArray.map((singleFile) => {\n            formData.append('files[]', singleFile);\n        });\n        let response = await fetch(baseService.getApiUrl() +'/uploadMulti', {\n            method: 'POST',\n            body: formData,\n            headers: {\n                'Authorization': baseService.getToken()\n            },\n        });\n        if (response.ok) {\n\n            try {\n\n                let filesFetched = await response.json();\n                let files = [...this.state.files];\n                filesFetched.map((singleFile) => {\n                    files.push(singleFile);\n                });\n\n                this.setState({files}, () => this.update());\n            } catch (e) {\n                console.log(e)\n            }\n        } else {\n            console.log('response not ok ', response)\n        }\n\n\n    }\n\n    //TODO later relate this in each update\n    update = () => {\n        if (this.props && this.props.updateMedia) {\n            this.props.updateMedia(this.state.files);\n        }\n    }\n\n    removeImageFile = (index) => {\n        let files = [...this.state.files];\n        files.splice(index, 1);\n        this.setState({files}, () => {\n            this.update()\n        });\n    };\n\n\n    addExternalLink = () => {\n        //check video type and send it to the server\n        if (this.state.externalLink !== '') {\n            //check if it's a valid link\n            let link = this.state.externalLink.toString().toLowerCase();\n            if (link.includes('.mp4') || link.includes('youtube') || link.match(/\\.(jpeg|jpg|gif|png)$/)) {\n                let type = link.includes('.mp4') || link.includes('youtube') ? 'video' : 'image'\n                let files = [...this.state.files];\n                files.push({\n                    link: this.state.externalLink,\n                    type: type\n                });\n                //let extention = link.substr(link.lastIndexOf('.')+1,link.length)\n                //console.log(extention)\n\n                this.setState({externalLink: '', files}, () => {\n                    this.update()\n                })\n            } else {\n                alert('invalid video/image url (Accepting MP4 or Youtube link');\n                return;\n            }\n        } else\n            alert('Please fill video link first')\n    }\n\n    onChange = (key, e) => {\n        this.setState({[key]: e.target.value})\n    }\n\n    render() {\n        return (\n            <div>\n                <div>\n                    <h2>Media</h2>\n                </div>\n\n                <Tabs id=\"controlled-tab-example\" activeKey={this.state.type} onSelect={k => this.setState({type: k})}>\n                    <Tab eventKey=\"image\" title=\"Upload\">\n                        <form>\n                            <input type=\"file\" onChange={this._handleImageChange} multiple/>\n                        </form>\n\n\n                    </Tab>\n                    <Tab eventKey=\"video\" title=\"External Link\">\n\n                        <Form.Group>\n                            <Form.Label>\n                                Add External Link\n                            </Form.Label>\n                            <Form.Row>\n                                <Form.Group as={Col}>\n                                    <Form.Control type=\"text\"\n                                                  placeholder=\"Video/Image Link (Youtube or external media link) MP4\"\n                                                  onChange={(e) => this.onChange('externalLink', e)}\n                                                  value={this.state.externalLink}\n                                    />\n                                </Form.Group>\n\n                                <Form.Group as={Col} className={'center'}>\n                                    <Button className=\"badge-info col-6\" onClick={() => this.addExternalLink()}><i\n                                        className=\"fa fa-plus\"/> Add</Button>\n                                </Form.Group>\n                            </Form.Row>\n                        </Form.Group>\n\n                    </Tab>\n\n                </Tabs>\n\n                <SortableList\n                    items={this.state.files}\n                    renderItem={(file, index) => {\n                        return (\n                            <div>\n                                <ListGroup.Item>\n                                    <div className={'row'}>\n                                        <div className={'col'}>\n                                            { (file.type.includes('video') && !file.link.toString().toLowerCase().includes('youtube')) ?\n                                                <video style={{width: 200, height: 250, padding: 5}} controls>\n                                                    <source\n                                                        src={file.link}\n                                                        type={'video/' + file.link.substr(file.link.lastIndexOf('.') + 1, file.link.length)}\n                                                    />\n                                                    Your browser does not support HTML5 video.\n                                                </video> : file.type.includes('video') && file.link.toString().toLowerCase().includes('youtube') &&\n                                                <iframe width=\"200\" height=\"250\"\n                                                        src={file.link.replace('watch?v=','embed/').split('&')[0]} frameBorder=\"0\"\n                                                        allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n                                                        allowFullScreen/>\n                                            }\n                                            {file.type.includes('image') &&\n                                            <img style={{width: 100, height: 100, padding: 5}} src={file.link}/>}\n\n                                        </div>\n                                        <Button variant=\"danger\"\n                                                onClick={() => this.removeImageFile(index)}>Remove</Button>\n                                    </div>\n                                </ListGroup.Item>\n                            </div>)\n                    }}\n                    reOrder={(files) => {\n                        //prevent issue when removing\n                        if (this.state.files.length === files.length) {\n                            if (files[0].type === 'image') {\n                                this.setState({files}, () => {\n                                    this.update()\n                                });\n\n                            } else {\n                                alert('The first item must be an image')\n                            }\n                        }\n\n                    }}\n\n                >\n                </SortableList>\n\n\n\n\n            </div>\n        )\n    }\n\n\n}\n\nexport default Media;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/MediaSingle.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Tab, ListGroup, Button, Form, Col, FormControl } from 'react-bootstrap';\nimport axios from 'axios';\nimport FormData from 'form-data';\n\nclass MediaSingle extends Component {\n  constructor(props) {\n    super(props);\n\n    this._handleImageChange = async e => {\n      e.preventDefault(); //reset the chosen photos\n      //this.setState({files: []});\n\n      let file = e.target.files;\n      const formData = new FormData();\n      formData.append('file', file);\n      await fetch('http://localhost:1111/api/upload', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Authorization': \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8\"\n        }\n      }).then(response => {\n        let files = [...this.state.files];\n        console.log(response);\n      }).catch(err => console.log(err));\n\n      if (!file[0].type.toString().includes('image')) {\n        alert('allowed type (Images) ONLY');\n        return;\n      }\n\n      let reader = new FileReader();\n      reader.readAsDataURL(file[0]);\n\n      reader.onloadend = () => {\n        let files = [...this.state.files];\n        file[0].blob = reader.result;\n        files.push(file[0]);\n        this.setState({\n          files: files\n        });\n      };\n    };\n\n    this.removeImageFile = index => {\n      this.setState({\n        files: []\n      });\n    };\n\n    this.onChange = (key, e) => {\n      this.setState({\n        [key]: e.target.value\n      });\n    };\n\n    this.state = {\n      files: []\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n    this._handleSubmit = this._handleSubmit.bind(this);\n  }\n\n  _handleSubmit(e) {\n    e.preventDefault(); // TODO: do something with -> this.state.file\n\n    this.props.updateMedia(this.state.files);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this._handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this._handleImageChange,\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this._handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Upload Image\"))), this.state.files && this.state.files.map((file, index) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'row',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'col',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      }, file.type.includes('image') && React.createElement(\"img\", {\n        style: {\n          width: 100,\n          height: 100,\n          padding: 5\n        },\n        src: file.blob,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.removeImageFile(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Remove\"))));\n    }));\n  }\n\n}\n\nexport default MediaSingle;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/MediaSingle.js"],"names":["React","Component","Tabs","Tab","ListGroup","Button","Form","Col","FormControl","axios","FormData","MediaSingle","constructor","props","_handleImageChange","e","preventDefault","file","target","files","formData","append","fetch","method","body","headers","then","response","state","console","log","catch","err","type","toString","includes","alert","reader","FileReader","readAsDataURL","onloadend","blob","result","push","setState","removeImageFile","index","onChange","key","value","bind","_handleSubmit","updateMedia","render","map","width","height","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Tabs, Tab, ListGroup, Button, Form, Col, FormControl} from 'react-bootstrap'\nimport axios from 'axios'\nimport FormData from 'form-data';\n\nclass MediaSingle extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n        };\n        this._handleImageChange = this._handleImageChange.bind(this);\n        this._handleSubmit = this._handleSubmit.bind(this);\n    }\n\n\n    _handleSubmit(e) {\n        e.preventDefault();\n        // TODO: do something with -> this.state.file\n\n        this.props.updateMedia(this.state.files);\n\n    }\n\n    _handleImageChange = async (e) => {\n        e.preventDefault();\n        //reset the chosen photos\n        //this.setState({files: []});\n\n\n        let file = e.target.files;\n\n        const formData = new FormData();\n        formData.append('file',file)\n        await fetch('http://localhost:1111/api/upload', {\n            method: 'POST',\n            body: formData,\n            headers: {\n                'Authorization': \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8\"\n            },\n        }).then((response) => {\n            let files = [...this.state.files];\n            \n            console.log(response)\n        }).catch((err) => console.log(err));\n\n        if (!file[0].type.toString().includes('image')) {\n            alert('allowed type (Images) ONLY');\n            return;\n        }\n        let reader = new FileReader();\n\n        reader.readAsDataURL(file[0]);\n        reader.onloadend = () => {\n            let files = [...this.state.files];\n\n            file[0].blob = reader.result;\n            files.push(file[0]);\n            this.setState({\n                files: files\n            });\n\n        }\n\n\n    }\n\n    removeImageFile = (index) => {\n        this.setState({files: []})\n    };\n\n\n    onChange = (key, e) => {\n        this.setState({[key]: e.target.value})\n    };\n\n    render() {\n\n\n        return (\n            <div>\n\n                <form onSubmit={this._handleSubmit}>\n                    <div className={\"row p-2\"}>\n                        <input type=\"file\" onChange={this._handleImageChange} className={\"col\"}/>\n                        <button type=\"submit\" onClick={this._handleSubmit}>Upload Image</button>\n                    </div>\n                </form>\n                {this.state.files && this.state.files.map((file, index) => {\n                    return (\n                        <div>\n                            <ListGroup.Item>\n                                <div className={'row'}>\n                                    <div className={'col'}>\n                                        {file.type.includes('image') &&\n                                        <img style={{width: 100, height: 100, padding: 5}} src={file.blob}/>}\n\n                                    </div>\n                                    <Button variant=\"danger\"\n                                            onClick={() => this.removeImageFile(index)}>Remove</Button>\n                                </div>\n                            </ListGroup.Item>\n                        </div>)\n\n                })}\n\n\n            </div>\n        )\n    }\n\n\n}\n\nexport default MediaSingle;\n"]},"metadata":{},"sourceType":"module"}
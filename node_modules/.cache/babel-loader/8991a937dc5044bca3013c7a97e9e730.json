{"ast":null,"code":"var _jsxFileName = \"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Media.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Tab, ListGroup, Button, Form, Col, FormControl } from 'react-bootstrap';\nimport FormData from 'form-data';\n\nclass Media extends Component {\n  constructor(props) {\n    super(props);\n\n    this._handleImageChange = async e => {\n      e.preventDefault(); //reset the chosen photos\n      //this.setState({files:[],imageUrls:[]})\n\n      /*\n              let files = Array.from(e.target.files);\n      \n      \n              //console.log(files)\n              files.map((file, index) => {\n                  console.log(file, 'inside loop')\n                  let reader = new FileReader();\n                  reader.readAsDataURL(file);\n                  reader.onloadend = () => {\n                      let files = [...this.state.files];\n                      file.blob = reader.result;\n                      files.push(file);\n                      this.setState({\n                          files: files\n                      });\n      \n                  }\n              });\n      */\n\n      let filesArray = Array.from(e.target.files);\n      const formData = new FormData();\n      filesArray.map(singleFile => {\n        formData.append('files[]', singleFile);\n      });\n      let response = await fetch('http://localhost:1111/api/uploadMulti', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Authorization': \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8\"\n        }\n      });\n\n      if (response.ok) {\n        try {\n          let files = await response.json();\n          files.map(singleFile => {\n            let files = [...this.state.files];\n            files.push({\n              link: singleFile.link,\n              type: this.getFileType(singleFile.link)\n            });\n          });\n          console.log(\"files from response are \", file); //this.setState({files:file.link});\n          //this.props.updateMedia(file.link);\n        } catch (e) {\n          console.log(e);\n        }\n      } else {\n        console.log('response not ok ', response);\n      }\n    };\n\n    this.removeImageFile = index => {\n      let files = [...this.state.files];\n      let imageUrls = [...this.state.imageUrls];\n      files.splice(index, 1);\n      imageUrls.splice(index, 1);\n      this.setState({\n        files,\n        imageUrls\n      });\n    };\n\n    this.removeVideo = index => {\n      let videoUrls = [...this.state.videoUrls];\n      videoUrls.splice(index, 1);\n      this.setState({\n        videoUrls\n      });\n    };\n\n    this.addVideo = () => {\n      //check video type and send it to the server\n      if (this.state.externalVideoLink !== '') {\n        //check if it's a valid link\n        let link = this.state.externalVideoLink.toString().toLowerCase();\n\n        if (!link.includes('mp4') || !link.includes('youtube') || !link.includes('www.')) {\n          alert('invalid video url (Accepting MP4 or Youtube link');\n          return;\n        }\n\n        alert('video added');\n        this.setState({\n          externalVideoLink: ''\n        });\n      } else alert('Please fill video link first');\n    };\n\n    this.onChange = (key, e) => {\n      this.setState({\n        [key]: e.target.value\n      });\n    };\n\n    this.state = {\n      files: [],\n      imageUrls: [],\n      videoUrls: [],\n      type: 'image',\n      externalVideoLink: ''\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Media\")), React.createElement(Tabs, {\n      id: \"controlled-tab-example\",\n      activeKey: this.state.type,\n      onSelect: k => this.setState({\n        type: k\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Tab, {\n      eventKey: \"image\",\n      title: \"Images\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this._handleImageChange,\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), this.state.files && this.state.files.map((file, index) => {\n      console.log('file type: ', file.type);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'row',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'col',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, file.type.includes('video') && React.createElement(\"video\", {\n        width: \"400\",\n        controls: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(\"source\", {\n        src: file.blob,\n        type: file.type,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), \"Your browser does not support HTML5 video.\"), file.type.includes('image') && React.createElement(\"img\", {\n        style: {\n          width: 100,\n          height: 100,\n          padding: 5\n        },\n        src: file.blob,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.removeImageFile(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Remove\"))));\n    })), React.createElement(Tab, {\n      eventKey: \"video\",\n      title: \"Videos\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Form.Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Add video\"), React.createElement(Form.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      as: Col,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      placeholder: \"Video Link (Youtube or external link) MP4\",\n      onChange: e => this.onChange('externalVideoLink', e),\n      value: this.state.externalVideoLink,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    })), React.createElement(Form.Group, {\n      as: Col,\n      className: 'center',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(Button, {\n      className: \"badge-info col-6\",\n      onClick: () => this.addVideo(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), \" Add\")))), this.state.videoUrls && this.state.videoUrls.map((url, index) => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(ListGroup.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'row',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: 'col',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        style: {\n          width: 100,\n          height: 100,\n          padding: 5\n        },\n        src: url,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      })), React.createElement(Button, {\n        variant: \"danger\",\n        onClick: () => this.removeVideo(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Remove\"))));\n    }))));\n  }\n\n}\n\nexport default Media;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Media.js"],"names":["React","Component","Tabs","Tab","ListGroup","Button","Form","Col","FormControl","FormData","Media","constructor","props","_handleImageChange","e","preventDefault","filesArray","Array","from","target","files","formData","map","singleFile","append","response","fetch","method","body","headers","ok","json","state","push","link","type","getFileType","console","log","file","removeImageFile","index","imageUrls","splice","setState","removeVideo","videoUrls","addVideo","externalVideoLink","toString","toLowerCase","includes","alert","onChange","key","value","bind","render","k","blob","width","height","padding","url"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Tabs, Tab, ListGroup, Button, Form, Col, FormControl} from 'react-bootstrap'\nimport FormData from 'form-data';\n\nclass Media extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: [],\n            imageUrls: [],\n            videoUrls: [],\n            type: 'image',\n            externalVideoLink:'',\n        };\n        this._handleImageChange = this._handleImageChange.bind(this);\n    }\n\n\n\n    _handleImageChange = async (e)=> {\n        e.preventDefault();\n        //reset the chosen photos\n        //this.setState({files:[],imageUrls:[]})\n\n/*\n        let files = Array.from(e.target.files);\n\n\n        //console.log(files)\n        files.map((file, index) => {\n            console.log(file, 'inside loop')\n            let reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onloadend = () => {\n                let files = [...this.state.files];\n                file.blob = reader.result;\n                files.push(file);\n                this.setState({\n                    files: files\n                });\n\n            }\n        });\n*/\n        let filesArray = Array.from(e.target.files);\n        const formData = new FormData();\n        filesArray.map((singleFile) =>{\n            formData.append('files[]', singleFile);\n        });\n        let response = await fetch('http://localhost:1111/api/uploadMulti', {\n            method: 'POST',\n            body: formData,\n            headers: {\n                'Authorization': \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8\"\n            },\n        });\n        if (response.ok){\n\n            try{\n\n                let files = await response.json();\n                files.map((singleFile)=>{\n                    let files = [...this.state.files];\n                    files.push({\n                        link:singleFile.link,\n                        type:this.getFileType(singleFile.link)\n                    })\n                })\n                console.log(\"files from response are \",file);\n                //this.setState({files:file.link});\n                //this.props.updateMedia(file.link);\n            }catch (e) {\n                console.log(e)\n            }\n        }\n        else{\n            console.log('response not ok ',response)\n        }\n\n\n    }\n\n    removeImageFile = (index) => {\n        let files = [...this.state.files];\n        let imageUrls = [...this.state.imageUrls];\n        files.splice(index, 1);\n        imageUrls.splice(index, 1);\n        this.setState({files, imageUrls})\n    };\n    removeVideo = (index) => {\n        let videoUrls = [...this.state.videoUrls];\n        videoUrls.splice(index, 1);\n        this.setState({videoUrls})\n    };\n\n    addVideo = () => {\n        //check video type and send it to the server\n        if(this.state.externalVideoLink !==''){\n            //check if it's a valid link\n            let link = this.state.externalVideoLink.toString().toLowerCase();\n            if(!link.includes('mp4') || !link.includes('youtube') || !link.includes('www.')){\n                alert('invalid video url (Accepting MP4 or Youtube link');\n                return;\n            }\n            alert('video added');\n            this.setState({externalVideoLink:''})\n        }\n        else\n            alert('Please fill video link first')\n    }\n\n    onChange = (key,e)=>{\n        this.setState({[key]:e.target.value})\n    }\n    render() {\n\n\n        return (\n            <div>\n                <div>\n                    <h2>Media</h2>\n                </div>\n\n                <Tabs id=\"controlled-tab-example\" activeKey={this.state.type} onSelect={k => this.setState({type: k})}>\n                    <Tab eventKey=\"image\" title=\"Images\">\n                        <form >\n                            <input type=\"file\" onChange={this._handleImageChange} multiple/>\n                        </form>\n                        {this.state.files && this.state.files.map((file, index) => {\n                            console.log('file type: ', file.type)\n                            return (\n                                <div>\n                                    <ListGroup.Item>\n                                        <div className={'row'}>\n                                            <div className={'col'}>\n                                                {file.type.includes('video') &&\n                                                <video width=\"400\" controls>\n                                                    <source\n                                                        src={file.blob}\n                                                        type={file.type}\n                                                    />\n                                                    Your browser does not support HTML5 video.\n                                                </video>\n                                                }\n                                                {file.type.includes('image') &&\n                                                <img style={{width: 100, height: 100, padding: 5}} src={file.blob}/>}\n\n                                            </div>\n                                            <Button variant=\"danger\"\n                                                    onClick={() => this.removeImageFile(index)}>Remove</Button>\n                                        </div>\n                                    </ListGroup.Item>\n                                </div>)\n\n                        })}\n                    </Tab>\n                    <Tab eventKey=\"video\" title=\"Videos\">\n\n                        <Form.Group>\n                            <Form.Label>\n                                Add video\n                            </Form.Label>\n                            <Form.Row>\n                                <Form.Group as={Col}>\n                                    <Form.Control type=\"text\" placeholder=\"Video Link (Youtube or external link) MP4\"\n                                                  onChange={(e)=>this.onChange('externalVideoLink',e)}\n                                                  value={this.state.externalVideoLink}\n                                    />\n                                </Form.Group>\n\n                                <Form.Group as={Col} className={'center'}>\n                                    <Button className=\"badge-info col-6\" onClick={() => this.addVideo()}><i\n                                        className=\"fa fa-plus\"/> Add</Button>\n                                </Form.Group>\n                            </Form.Row>\n                        </Form.Group>\n\n                        {this.state.videoUrls && this.state.videoUrls.map((url, index) => {\n                            return (\n                                <div>\n                                    <ListGroup.Item>\n                                        <div className={'row'}>\n                                            <div className={'col'}>\n\n                                                <img style={{width: 100, height: 100, padding: 5}} src={url}/>\n                                            </div>\n                                            <Button variant=\"danger\"\n                                                    onClick={() => this.removeVideo(index)}>Remove</Button>\n                                        </div>\n                                    </ListGroup.Item>\n                                </div>)\n                        })}\n                    </Tab>\n\n                </Tabs>\n\n\n            </div>\n        )\n    }\n\n\n}\n\nexport default Media;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Form}from\"react-bootstrap\";import baseService from'../services/baseService';import Table from\"react-bootstrap/Table\";import'react-confirm-alert/src/react-confirm-alert.css';// Import css\n//unique function\nArray.prototype.unique=function(){return this.filter(function(value,index,self){return self.indexOf(value)===index;});};var Visitors=/*#__PURE__*/function(_Component){_inherits(Visitors,_Component);function Visitors(){var _getPrototypeOf2;var _this;_classCallCheck(this,Visitors);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Visitors)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={visitors:[],loading:true};_this.getUniqueVisitors=function(){//get unique visitors by unique id\nif(_this.state.visitors.length>0){var visitors=_this.state.visitors.map(function(visitor){return visitor.deviceId;});return visitors.unique().length;}else return 0;};_this.getVisitors=function(platform){if(_this.state.visitors.length>0){var visitors=_this.state.visitors.filter(function(visitor){return visitor.platform===platform;});return visitors.length;}else return 0;};return _this;}_createClass(Visitors,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;baseService.getVisitors().then(function(visitors){console.log(visitors);_this2.setState({visitors:visitors,loading:false});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"h2\",null,\"Visitors\"),React.createElement(Form,null,React.createElement(\"p\",null,\"Number of total visitors# \",this.state.visitors.length),React.createElement(\"p\",null,\"Number of Unique visitors# \",this.getUniqueVisitors()),React.createElement(\"p\",null,\"Number of IOS visitors# \",this.getVisitors('ios')),React.createElement(\"p\",null,\"Number of Android visitors# \",this.getVisitors('android')),React.createElement(Table,{striped:true,bordered:true,hover:true},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",null,\"#\"),React.createElement(\"th\",null,\"Carrier\"),React.createElement(\"th\",null,\"DeviceId\"),React.createElement(\"th\",null,\"Platform\"),React.createElement(\"th\",null,\"ipAddress\"),React.createElement(\"th\",null,\"uniqueId\"),React.createElement(\"th\",null,\"isTablet\"),React.createElement(\"th\",null,\"landscape\"))),React.createElement(\"tbody\",null,this.state.visitors.length>0?this.state.visitors.map(function(visitor,index){return React.createElement(\"tr\",null,React.createElement(\"td\",null,index),React.createElement(\"td\",null,visitor.carrier),React.createElement(\"td\",null,visitor.deviceId),React.createElement(\"td\",null,visitor.platform),React.createElement(\"td\",null,visitor.ipAddress),React.createElement(\"td\",null,visitor.uniqueId),React.createElement(\"td\",null,visitor.isTablet?'YES':'NO'),React.createElement(\"td\",null,visitor.landscape?'YES':'NO'));}):React.createElement(\"tr\",null,React.createElement(\"td\",{colSpan:\"8\"},React.createElement(\"center\",null,\"No Visitors yet\")))))));}}]);return Visitors;}(Component);export default Visitors;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Visitors.js"],"names":["React","Component","Form","baseService","Table","Array","prototype","unique","filter","value","index","self","indexOf","Visitors","state","visitors","loading","getUniqueVisitors","length","map","visitor","deviceId","getVisitors","platform","then","console","log","setState","catch","err","carrier","ipAddress","uniqueId","isTablet","landscape"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Form} from \"react-bootstrap\";\nimport baseService from '../services/baseService'\nimport Table from \"react-bootstrap/Table\";\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\n//unique function\nArray.prototype.unique = function() {\n    return this.filter(function (value, index, self) {\n        return self.indexOf(value) === index;\n    });\n};\n\nclass Visitors extends Component {\n    state = {\n        visitors: [],\n        loading: true,\n\n    };\n\n    componentWillMount() {\n        baseService.getVisitors().then((visitors) => {\n            console.log(visitors)\n            this.setState({\n                visitors,\n                loading: false\n            })\n        }).catch((err) => console.log(err));\n    }\n\n\n\n    getUniqueVisitors = () =>{\n        //get unique visitors by unique id\n      if(this.state.visitors.length > 0){\n          const visitors = this.state.visitors.map(visitor => visitor.deviceId);\n          return visitors.unique().length;\n      }\n      else\n          return 0;\n    };\n    getVisitors = (platform) =>{\n        if(this.state.visitors.length > 0){\n            const visitors = this.state.visitors.filter(visitor => visitor.platform === platform);\n            return visitors.length;\n        }\n        else\n            return 0;\n    };\n    render() {\n        return (\n            <div>\n                <h2>Visitors</h2>\n\n\n                <Form>\n                    <p>Number of total visitors# {this.state.visitors.length}</p>\n                    <p>Number of Unique visitors# {this.getUniqueVisitors()}</p>\n                    <p>Number of IOS visitors# {this.getVisitors('ios')}</p>\n                    <p>Number of Android visitors# {this.getVisitors('android')}</p>\n                    <Table striped bordered hover>\n                        <thead>\n                        <tr>\n                            <th>#</th>\n                            <th>Carrier</th>\n                            <th>DeviceId</th>\n                            <th>Platform</th>\n                            <th>ipAddress</th>\n                            <th>uniqueId</th>\n                            <th>isTablet</th>\n                            <th>landscape</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n\n                        {this.state.visitors.length > 0 ? this.state.visitors.map((visitor, index) => {\n                            return (\n                                <tr>\n                                    <td>{index}</td>\n                                    <td>{visitor.carrier}</td>\n                                    <td>{visitor.deviceId}</td>\n                                    <td>{visitor.platform}</td>\n                                    <td>{visitor.ipAddress}</td>\n                                    <td>{visitor.uniqueId}</td>\n                                    <td>{visitor.isTablet? 'YES' : 'NO'}</td>\n                                    <td>{visitor.landscape? 'YES' : 'NO'}</td>\n\n\n                                </tr>\n                            )\n                        }) : <tr>\n                            <td colSpan=\"8\">\n                                <center>No Visitors yet</center>\n                            </td>\n                        </tr>}\n\n                        </tbody>\n                    </Table>\n                </Form>\n\n\n\n            </div>\n        );\n    }\n}\n\nexport default Visitors;\n"]},"metadata":{},"sourceType":"module"}
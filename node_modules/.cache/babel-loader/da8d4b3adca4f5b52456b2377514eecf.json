{"ast":null,"code":"var _jsxFileName = \"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/MediaSingle.js\";\nimport React, { Component } from 'react';\nimport { Tabs, Tab, ListGroup, Button, Form, Col, FormControl } from 'react-bootstrap';\nimport axios from 'axios';\nimport FormData from 'form-data';\nimport baseService from \"../services/baseService\";\n\nclass MediaSingle extends Component {\n  constructor(props) {\n    super(props);\n\n    this._handleImageChange = async e => {\n      e.preventDefault();\n      let file = e.target.files;\n\n      if (!file[0].type.toString().includes('image')) {\n        alert('allowed type (Images) ONLY');\n        return;\n      } //reset the chosen photos\n\n\n      this.setState({\n        files: []\n      });\n      const formData = new FormData();\n      formData.append('file', file[0]);\n      let response = await fetch(baseService.getApiUrl() + '/upload', {\n        method: 'POST',\n        body: formData,\n        headers: {\n          'Authorization': baseService.getToken()\n        }\n      });\n\n      if (response.ok) {\n        try {\n          let file = await response.json();\n          this.setState({\n            files: file.link\n          });\n          this.props.updateMedia(file.link);\n        } catch (e) {\n          console.log(e);\n        }\n      } else {\n        console.log('response not ok ', response);\n      }\n    };\n\n    this.removeImageFile = () => {\n      this.setState({\n        files: ''\n      });\n      this.props.updateMedia('');\n    };\n\n    this.onChange = (key, e) => {\n      this.setState({\n        [key]: e.target.value\n      });\n    };\n\n    this.state = {\n      files: ''\n    };\n    this._handleImageChange = this._handleImageChange.bind(this);\n  }\n\n  componentWillMount() {\n    if (this.props.icon) {\n      this.setState({\n        files: this.props.icon\n      });\n    }\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    if (nextProps.icon) {\n      this.setState({\n        files: nextProps.icon\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row p-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this._handleImageChange,\n      className: \"col\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }))), this.state.files !== '' && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(ListGroup.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'row',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: 'col',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      style: {\n        width: 100,\n        height: 100,\n        padding: 5\n      },\n      src: this.state.files,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    })), React.createElement(Button, {\n      variant: \"danger\",\n      onClick: () => this.removeImageFile(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Remove\")))));\n  }\n\n}\n\nexport default MediaSingle;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/MediaSingle.js"],"names":["React","Component","Tabs","Tab","ListGroup","Button","Form","Col","FormControl","axios","FormData","baseService","MediaSingle","constructor","props","_handleImageChange","e","preventDefault","file","target","files","type","toString","includes","alert","setState","formData","append","response","fetch","getApiUrl","method","body","headers","getToken","ok","json","link","updateMedia","console","log","removeImageFile","onChange","key","value","state","bind","componentWillMount","icon","componentWillReceiveProps","nextProps","nextContext","render","width","height","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Tabs, Tab, ListGroup, Button, Form, Col, FormControl} from 'react-bootstrap'\nimport axios from 'axios'\nimport FormData from 'form-data';\nimport baseService from \"../services/baseService\";\n\nclass MediaSingle extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: '',\n        };\n        this._handleImageChange = this._handleImageChange.bind(this);\n    }\n\n\n    componentWillMount() {\n        if(this.props.icon){\n            this.setState({files:this.props.icon})\n        }\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        if(nextProps.icon){\n            this.setState({files:nextProps.icon})\n        }\n    }\n\n    _handleImageChange = async (e) => {\n        e.preventDefault();\n        let file = e.target.files;\n        if (!file[0].type.toString().includes('image')) {\n            alert('allowed type (Images) ONLY');\n            return;\n        }\n        //reset the chosen photos\n        this.setState({files: []});\n\n\n        const formData = new FormData();\n        formData.append('file', file[0])\n        let response = await fetch(baseService.getApiUrl() +'/upload', {\n            method: 'POST',\n            body: formData,\n            headers: {\n                'Authorization': baseService.getToken()\n            },\n        });\n        if (response.ok){\n\n            try{\n\n                let file = await response.json();\n                this.setState({files:file.link});\n                this.props.updateMedia(file.link);\n            }catch (e) {\n                console.log(e)\n            }\n        }\n        else{\n            console.log('response not ok ',response)\n        }\n\n\n\n    };\n\n    removeImageFile = () => {\n        this.setState({files: ''})\n        this.props.updateMedia('');\n    };\n\n\n    onChange = (key, e) => {\n        this.setState({[key]: e.target.value})\n    };\n\n    render() {\n\n\n        return (\n            <div>\n\n                <form >\n                    <div className={\"row p-2\"}>\n                        <input type=\"file\" onChange={this._handleImageChange} className={\"col\"}/>\n                    </div>\n                </form>\n                {this.state.files !== ''&&\n\n                        <div>\n                            <ListGroup.Item>\n                                <div className={'row'}>\n                                    <div className={'col'}>\n                                        <img style={{width: 100, height: 100, padding: 5}} src={this.state.files}/>\n\n                                    </div>\n                                    <Button variant=\"danger\"\n                                            onClick={() => this.removeImageFile()}>Remove</Button>\n                                </div>\n                            </ListGroup.Item>\n                        </div>\n\n                }\n\n\n            </div>\n        )\n    }\n\n\n}\n\nexport default MediaSingle;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Locations.js\";\nimport React, { Component } from 'react';\nimport baseService from '../services/baseService';\nimport { Button, Form, Modal, Table } from \"react-bootstrap\";\nimport AddLocation from \"./AddLocation\";\n\nclass Locations extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      locations: [],\n      loading: true,\n      modal: false,\n      index: -1,\n      edit: false\n    };\n\n    this.fetchLocations = () => {\n      baseService.getLocations().then(locations => {\n        this.setState({\n          locations,\n          loading: false\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.addLocation = () => {};\n\n    this.removeLocation = async location => {\n      let response = await baseService.removeLocation(location);\n\n      if (response) {\n        this.fetchLocations(); //reload\n      } else {\n        alert('failed to delete the location');\n      }\n    };\n  }\n\n  componentWillMount() {\n    this.fetchLocations();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, \"Locations\"), React.createElement(Button, {\n      variant: \"success\",\n      onClick: () => this.setState({\n        modal: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fa fa-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), \" Add Location\"), React.createElement(Table, {\n      striped: true,\n      bordered: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"#\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Name Ar\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"Desc\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, \"Desc Ar\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, \"Actions\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, this.state.locations.map((location, index) => {\n      return React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, index), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, location.name), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, location.nameAr), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, location.desc), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, location.descAr), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fa fa-trash fa-2x\",\n        style: {\n          color: 'red'\n        },\n        onClick: () => this.removeLocation(location),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        className: \"fa fa-edit fa-2x\",\n        style: {\n          color: 'green'\n        },\n        onClick: () => this.setState({\n          index,\n          edit: true,\n          modal: true\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      })));\n    }))), React.createElement(AddLocationModal, {\n      modal: this.state.modal,\n      location: this.state.locations[this.state.index],\n      edit: this.state.edit,\n      updateLocation: () => {\n        this.fetchLocations();\n        this.setState({\n          modal: false,\n          edit: false,\n          index: -1\n        });\n      },\n      handleClose: () => {\n        this.setState({\n          modal: false\n        });\n        this.fetchLocations();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Locations;\n\nclass AddLocationModal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modal: false,\n      edit: false,\n      location: {},\n      title: 'Add'\n    };\n\n    this.handleClose = () => {\n      this.setState({\n        modal: false\n      });\n      if (this.props && this.props.updateLocation) this.props.updateLocation();else {\n        this.props.handleClose();\n      }\n    };\n\n    this.handleShow = () => this.setState({\n      modal: true\n    });\n  }\n\n  componentWillReceiveProps(nextProps, nextContext) {\n    //console.log(\"i;m recving \",nextProps)\n    this.setState({\n      modal: nextProps.modal,\n      edit: nextProps.edit,\n      title: 'Add'\n    });\n\n    if (nextProps.edit) {\n      if (nextProps.location) {\n        this.setState({\n          title: 'Edit',\n          edit: true,\n          location: nextProps.location\n        });\n      }\n    }\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(Modal, {\n      show: this.state.modal,\n      onHide: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, this.state.title, \" Location\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(AddLocation, {\n      edit: this.state.edit,\n      location: this.state.location,\n      updateLocation: this.props.updateLocation,\n      handleClose: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/Locations.js"],"names":["React","Component","baseService","Button","Form","Modal","Table","AddLocation","Locations","state","locations","loading","modal","index","edit","fetchLocations","getLocations","then","setState","catch","err","console","log","addLocation","removeLocation","location","response","alert","componentWillMount","render","map","name","nameAr","desc","descAr","color","AddLocationModal","title","handleClose","props","updateLocation","handleShow","componentWillReceiveProps","nextProps","nextContext"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport baseService from '../services/baseService'\nimport {Button, Form, Modal, Table} from \"react-bootstrap\";\nimport AddLocation from \"./AddLocation\";\n\nclass Locations extends Component {\n    state = {\n        locations: [],\n        loading: true,\n        modal: false,\n        index: -1,\n        edit: false,\n\n    }\n\n    componentWillMount() {\n        this.fetchLocations();\n    }\n\n    fetchLocations = () => {\n        baseService.getLocations().then((locations) => {\n            this.setState({locations, loading: false})\n        }).catch((err) => console.log(err))\n    }\n\n    addLocation = () => {\n\n    };\n    removeLocation = async (location) => {\n        let response = await baseService.removeLocation(location);\n        if (response) {\n            this.fetchLocations();//reload\n        } else {\n            alert('failed to delete the location')\n        }\n\n    };\n\n    render() {\n\n        return (\n            <div>\n                <h2>Locations</h2>\n                <Button variant=\"success\" onClick={() => this.setState({modal: true})}>\n                    <i className=\"fa fa-plus\"/> Add Location\n                </Button>\n\n                <Table striped bordered hover>\n                    <thead>\n                    <tr>\n                        <th>#</th>\n                        <th>Name</th>\n                        <th>Name Ar</th>\n                        <th>Desc</th>\n                        <th>Desc Ar</th>\n                        <th>Actions</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    {this.state.locations.map((location, index) => {\n                        return (\n                            <tr>\n                                <td>{index}</td>\n                                <td>{location.name}</td>\n                                <td>{location.nameAr}</td>\n                                <td>{location.desc}</td>\n                                <td>{location.descAr}</td>\n                                <td>\n                                    <i className=\"fa fa-trash fa-2x\" style={{color: 'red'}}\n                                       onClick={() => this.removeLocation(location)}/>\n                                    <i className=\"fa fa-edit fa-2x\" style={{color: 'green'}}\n                                       onClick={() => this.setState({index, edit: true, modal: true})}/>\n                                </td>\n\n                            </tr>\n                        )\n\n                    })}\n\n                    </tbody>\n                </Table>\n                <AddLocationModal modal={this.state.modal} location={this.state.locations[this.state.index]}\n                                  edit={this.state.edit}\n                                  updateLocation={() => {\n                                      this.fetchLocations()\n                                      this.setState({modal: false, edit: false, index: -1});\n                                  }}\n                                  handleClose={() => {\n                                      this.setState({modal: false})\n                                      this.fetchLocations();\n                                  }}\n                />\n            </div>\n        );\n    }\n}\n\nexport default Locations;\n\nclass AddLocationModal extends Component {\n    state = {\n        modal: false,\n        edit: false,\n        location: {},\n        title: 'Add'\n\n    }\n\n    handleClose = () => {\n        this.setState({modal: false});\n        if (this.props && this.props.updateLocation)\n            this.props.updateLocation();\n        else {\n            this.props.handleClose()\n        }\n    }\n    handleShow = () => this.setState({modal: true});\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        //console.log(\"i;m recving \",nextProps)\n        this.setState({modal: nextProps.modal, edit: nextProps.edit, title: 'Add'})\n        if (nextProps.edit) {\n            if (nextProps.location) {\n                this.setState({title: 'Edit', edit: true, location: nextProps.location});\n            }\n        }\n    }\n\n    render() {\n        return (\n            <>\n\n                <Modal show={this.state.modal} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>{this.state.title} Location</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <AddLocation edit={this.state.edit} location={this.state.location}\n                                     updateLocation={this.props.updateLocation}\n                                     handleClose={this.handleClose}\n                        />\n                    </Modal.Body>\n\n                </Modal>\n            </>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Tabs,Tab,ListGroup,Button,Form,Col,FormControl}from'react-bootstrap';import axios from'axios';import FormData from'form-data';import baseService from\"../services/baseService\";var MediaSingle=/*#__PURE__*/function(_Component){_inherits(MediaSingle,_Component);function MediaSingle(props){var _this;_classCallCheck(this,MediaSingle);_this=_possibleConstructorReturn(this,_getPrototypeOf(MediaSingle).call(this,props));_this._handleImageChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,response,_file;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();file=e.target.files;if(file[0].type.toString().includes('image')){_context.next=5;break;}alert('allowed type (Images) ONLY');return _context.abrupt(\"return\");case 5://reset the chosen photos\n_this.setState({files:[]});formData=new FormData();formData.append('file',file[0]);_context.next=10;return fetch(baseService.getApiUrl()+'/upload',{method:'POST',body:formData,headers:{'Authorization':baseService.getToken()}});case 10:response=_context.sent;if(!response.ok){_context.next=25;break;}_context.prev=12;_context.next=15;return response.json();case 15:_file=_context.sent;_this.setState({files:_file.link});_this.props.updateMedia(_file.link);_context.next=23;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](12);console.log(_context.t0);case 23:_context.next=26;break;case 25:console.log('response not ok ',response);case 26:case\"end\":return _context.stop();}}},_callee,null,[[12,20]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.removeImageFile=function(){_this.setState({files:''});_this.props.updateMedia('');};_this.onChange=function(key,e){_this.setState(_defineProperty({},key,e.target.value));};_this.state={files:''};_this._handleImageChange=_this._handleImageChange.bind(_assertThisInitialized(_this));return _this;}_createClass(MediaSingle,[{key:\"componentWillMount\",value:function componentWillMount(){if(this.props.icon){this.setState({files:this.props.icon});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){if(nextProps.icon){this.setState({files:nextProps.icon});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",null,React.createElement(\"form\",null,React.createElement(\"div\",{className:\"row p-2\"},React.createElement(\"input\",{type:\"file\",onChange:this._handleImageChange,className:\"col\"}))),this.state.files!==''&&React.createElement(\"div\",null,React.createElement(ListGroup.Item,null,React.createElement(\"div\",{className:'row'},React.createElement(\"div\",{className:'col'},React.createElement(\"img\",{style:{width:100,height:100,padding:5},src:this.state.files})),React.createElement(Button,{variant:\"danger\",onClick:function onClick(){return _this2.removeImageFile();}},\"Remove\")))));}}]);return MediaSingle;}(Component);export default MediaSingle;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/MediaSingle.js"],"names":["React","Component","Tabs","Tab","ListGroup","Button","Form","Col","FormControl","axios","FormData","baseService","MediaSingle","props","_handleImageChange","e","preventDefault","file","target","files","type","toString","includes","alert","setState","formData","append","fetch","getApiUrl","method","body","headers","getToken","response","ok","json","link","updateMedia","console","log","removeImageFile","onChange","key","value","state","bind","icon","nextProps","nextContext","width","height","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Tabs, Tab, ListGroup, Button, Form, Col, FormControl} from 'react-bootstrap'\nimport axios from 'axios'\nimport FormData from 'form-data';\nimport baseService from \"../services/baseService\";\n\nclass MediaSingle extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            files: '',\n        };\n        this._handleImageChange = this._handleImageChange.bind(this);\n    }\n\n\n    componentWillMount() {\n        if(this.props.icon){\n            this.setState({files:this.props.icon})\n        }\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        if(nextProps.icon){\n            this.setState({files:nextProps.icon})\n        }\n    }\n\n    _handleImageChange = async (e) => {\n        e.preventDefault();\n        let file = e.target.files;\n        if (!file[0].type.toString().includes('image')) {\n            alert('allowed type (Images) ONLY');\n            return;\n        }\n        //reset the chosen photos\n        this.setState({files: []});\n\n\n        const formData = new FormData();\n        formData.append('file', file[0])\n        let response = await fetch(baseService.getApiUrl() +'/upload', {\n            method: 'POST',\n            body: formData,\n            headers: {\n                'Authorization': baseService.getToken()\n            },\n        });\n        if (response.ok){\n\n            try{\n\n                let file = await response.json();\n                this.setState({files:file.link});\n                this.props.updateMedia(file.link);\n            }catch (e) {\n                console.log(e)\n            }\n        }\n        else{\n            console.log('response not ok ',response)\n        }\n\n\n\n    };\n\n    removeImageFile = () => {\n        this.setState({files: ''})\n        this.props.updateMedia('');\n    };\n\n\n    onChange = (key, e) => {\n        this.setState({[key]: e.target.value})\n    };\n\n    render() {\n\n\n        return (\n            <div>\n\n                <form >\n                    <div className={\"row p-2\"}>\n                        <input type=\"file\" onChange={this._handleImageChange} className={\"col\"}/>\n                    </div>\n                </form>\n                {this.state.files !== ''&&\n\n                        <div>\n                            <ListGroup.Item>\n                                <div className={'row'}>\n                                    <div className={'col'}>\n                                        <img style={{width: 100, height: 100, padding: 5}} src={this.state.files}/>\n\n                                    </div>\n                                    <Button variant=\"danger\"\n                                            onClick={() => this.removeImageFile()}>Remove</Button>\n                                </div>\n                            </ListGroup.Item>\n                        </div>\n\n                }\n\n\n            </div>\n        )\n    }\n\n\n}\n\nexport default MediaSingle;\n"]},"metadata":{},"sourceType":"module"}
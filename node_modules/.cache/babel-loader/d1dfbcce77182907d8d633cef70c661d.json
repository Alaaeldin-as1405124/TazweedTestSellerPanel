{"ast":null,"code":"import _toConsumableArray from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Form,Button,Row,Col,ListGroup,Alert,Modal,Container,FormControl}from'react-bootstrap';import{useState,useEffect,useRef}from'react';import Media from\"./Media\";import SocialMedia from\"./SocialMedia\";import baseService from\"../services/baseService\";import{confirmAlert}from'react-confirm-alert';// Import\nimport'react-confirm-alert/src/react-confirm-alert.css';// Import css\nvar AddLocation=/*#__PURE__*/function(_Component){_inherits(AddLocation,_Component);function AddLocation(){var _getPrototypeOf2;var _this;_classCallCheck(this,AddLocation);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AddLocation)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={modal:false,categories:[],name:'',nameAr:'',desc:'',descAr:'',locationCategories:[],media:[],locationSocialMedia:[],selectedCategory:0,loading:true,title:'Add',edit:false,location:{}};_this.checkProps=function(nextProps){if(nextProps.edit){var location=nextProps.location;if(location){//edit category\n_this.setState({location:nextProps.location,edit:true,title:'Edit',name:location.name,nameAr:location.nameAr,desc:location.desc,descAr:location.descAr,locationCategories:location.categories,media:location.media,locationSocialMedia:location.socialMedia});}}};_this.alert=function(title){confirmAlert({title:''+title,message:'',buttons:[{label:'Dismiss'}]});};_this.onChange=function(key,e){_this.setState(_defineProperty({},key,e.target.value));};_this.onCategoryChange=function(e){_this.setState({selectedCategory:e.target.selectedIndex});};_this.addCategory=function(){var locationCategories=_toConsumableArray(_this.state.locationCategories);if(locationCategories.includes(_this.state.categories[_this.state.selectedCategory])){alert('AddLocation already has this category');return;}locationCategories.push(_this.state.categories[_this.state.selectedCategory]);_this.setState({locationCategories:locationCategories});};_this.removeCategory=function(index){var locationCategories=_toConsumableArray(_this.state.locationCategories);locationCategories.splice(index,1);_this.setState({locationCategories:locationCategories});};_this.updateSocialMediaList=function(socialMediaList){//keep social media sync\n_this.setState({locationSocialMedia:socialMediaList});};_this.updateMediaFiles=function(media){_this.setState({media:media});};_this.addLocation=function(){var categories=[];_this.state.locationCategories.map(function(category){return categories.push(category._id);});var _this$state=_this.state,name=_this$state.name,nameAr=_this$state.nameAr,desc=_this$state.desc,descAr=_this$state.descAr,media=_this$state.media,locationSocialMedia=_this$state.locationSocialMedia;if(categories.length===0){alert('Please add categories to the location');return;}else if(media.length===0||name===''||nameAr===''||desc===''||descAr===''){alert('Please fill all the fields');return;}if(_this.state.edit){var location=_this.state.location;location.name=_this.state.name;location.nameAr=_this.state.nameAr;location.desc=_this.state.desc;location.descAr=_this.state.descAr;location.categories=categories;location.media=_this.state.media;location.socialMedia=_this.state.locationSocialMedia;baseService.updateLocation(location).then(function(response){if(_this.props&&_this.props.updateLocation)_this.props.updateLocation();}).catch(function(err){return console.log(err);});}else{var _location={name:_this.state.name,nameAr:_this.state.nameAr,desc:_this.state.desc,descAr:_this.state.descAr,categories:categories,media:_this.state.media,socialMedia:_this.state.locationSocialMedia};//just add it to the server\nbaseService.addLocation(_location).catch(function(err){return console.log(err);});if(_this.props&&_this.props.handleClose){//close the modal\n_this.props.handleClose();}}};return _this;}_createClass(AddLocation,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;baseService.getCategories().then(function(categories){return _this2.setState({categories:categories,loading:false});});this.checkProps(this.props);}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){this.checkProps(nextProps);}},{key:\"render\",value:function render(){var _this3=this;if(this.state.categories.length===0)return React.createElement(\"div\",{style:{color:'red'}},\"Please Add Category first\",React.createElement(Button,{className:\"badge-info col-6\",href:'/Categories'},React.createElement(\"i\",{className:\"fa fa-plus\"}),\" Add Category\"));return React.createElement(\"div\",null,React.createElement(Container,{class:true},React.createElement(Form,null,React.createElement(Form.Group,{as:Row},React.createElement(Form.Label,{column:true,sm:\"2\"},\"Name (English)\"),React.createElement(Col,{sm:\"4\"},React.createElement(Form.Control,{type:\"text\",placeholder:\"Location name\",onChange:function onChange(e){return _this3.onChange('name',e);},value:this.state.name})),React.createElement(Form.Label,{column:true,sm:\"2\"},\"Name (Arabic)\"),React.createElement(Col,{sm:\"4\"},React.createElement(Form.Control,{type:\"text\",placeholder:\"Location name (Arabic)\",onChange:function onChange(e){return _this3.onChange('nameAr',e);},value:this.state.nameAr}))),React.createElement(Form.Group,{as:Row,controlId:\"formPlaintextPassword\"},React.createElement(Form.Label,{column:true,sm:\"2\"},\"Description (English)\"),React.createElement(Col,{sm:\"4\"},React.createElement(Form.Control,{as:\"textarea\",placeholder:\"Location Description\",onChange:function onChange(e){return _this3.onChange('desc',e);},value:this.state.desc})),React.createElement(Form.Label,{column:true,sm:\"2\"},\"Description (Arabic)\"),React.createElement(Col,{sm:\"4\"},React.createElement(Form.Control,{as:\"textarea\",placeholder:\"Location Description (Arabic)\",onChange:function onChange(e){return _this3.onChange('descAr',e);},value:this.state.descAr}))),React.createElement(Form.Group,null,React.createElement(Form.Label,null,\"Please choose category\"),React.createElement(Form.Row,null,React.createElement(Form.Group,{as:Col},React.createElement(FormControl,{as:'select',onChange:this.onCategoryChange},this.state.categories.map(function(category,index){return React.createElement(\"option\",{key:index},category.name,\" / \",category.nameAr);}))),React.createElement(Form.Group,{as:Col,className:'center'},React.createElement(Button,{className:\"badge-info col-6\",onClick:function onClick(){return _this3.addCategory();}},React.createElement(\"i\",{className:\"fa fa-plus\"}),\" Add\")))),React.createElement(ListGroup,null,this.state.locationCategories.length!==0?this.state.locationCategories.map(function(category,index){return React.createElement(ListGroup.Item,null,React.createElement(\"div\",{className:'row'},React.createElement(\"img\",{style:{width:64,height:64,padding:5},src:category.icon}),React.createElement(\"p\",{className:'col'},category.name,\" / \",category.nameAr),React.createElement(Button,{variant:\"danger\",onClick:function onClick(){return _this3.removeCategory(index);}},\"Remove\")));}):React.createElement(ListGroup.Item,null,React.createElement(\"p\",{className:'col'},\"No categories yet\"))),React.createElement(Media,{media:this.state.media,updateMedia:this.updateMediaFiles}),React.createElement(\"div\",{className:'p-2'}),React.createElement(SocialMedia,{socialMediaList:this.state.locationSocialMedia,updateSocialMediaList:this.updateSocialMediaList}),React.createElement(\"div\",{className:'p-2'}),React.createElement(Example,{showModal:this.state.modal}),React.createElement(Button,{variant:\"primary\",onClick:function onClick(){return _this3.addLocation();}},this.state.title,\" Location\"))));}}]);return AddLocation;}(Component);export default AddLocation;var Example=/*#__PURE__*/function(_Component2){_inherits(Example,_Component2);function Example(){var _getPrototypeOf3;var _this4;_classCallCheck(this,Example);for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}_this4=_possibleConstructorReturn(this,(_getPrototypeOf3=_getPrototypeOf(Example)).call.apply(_getPrototypeOf3,[this].concat(args)));_this4.state={modal:false};_this4.handleClose=function(){return _this4.setState({modal:false});};_this4.handleShow=function(){return _this4.setState({modal:true});};return _this4;}_createClass(Example,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){//console.log(\"i;m recving \",nextProps)\nthis.setState({modal:nextProps.showModal});}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"modal-dialog modal-lg\"},React.createElement(Modal,{show:this.state.modal,onHide:this.handleClose},React.createElement(Modal.Header,{closeButton:true},React.createElement(Modal.Title,null,\"Modal heading\")),React.createElement(Modal.Body,null,\"Woohoo, you're reading this text in a modal!\"),React.createElement(Modal.Footer,null,React.createElement(Button,{variant:\"secondary\",onClick:this.handleClose},\"Close\"),React.createElement(Button,{variant:\"primary\",onClick:this.handleClose},\"Save Changes\"))));}}]);return Example;}(Component);//export default Example;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/components/AddLocation.js"],"names":["React","Component","Form","Button","Row","Col","ListGroup","Alert","Modal","Container","FormControl","useState","useEffect","useRef","Media","SocialMedia","baseService","confirmAlert","AddLocation","state","modal","categories","name","nameAr","desc","descAr","locationCategories","media","locationSocialMedia","selectedCategory","loading","title","edit","location","checkProps","nextProps","setState","socialMedia","alert","message","buttons","label","onChange","key","e","target","value","onCategoryChange","selectedIndex","addCategory","includes","push","removeCategory","index","splice","updateSocialMediaList","socialMediaList","updateMediaFiles","addLocation","map","category","_id","length","updateLocation","then","response","props","catch","err","console","log","handleClose","getCategories","nextContext","color","width","height","padding","icon","Example","handleShow","showModal"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Form, Button, Row, Col, ListGroup, Alert, Modal, Container, FormControl} from 'react-bootstrap'\nimport {useState, useEffect, useRef} from 'react'\nimport Media from \"./Media\";\nimport SocialMedia from \"./SocialMedia\";\nimport baseService from \"../services/baseService\";\nimport { confirmAlert } from 'react-confirm-alert'; // Import\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\n\nclass AddLocation extends Component {\n    state = {\n        modal: false,\n        categories: [],\n        name: '',\n        nameAr: '',\n        desc: '',\n        descAr: '',\n        locationCategories: [],\n        media: [],\n        locationSocialMedia: [],\n        selectedCategory: 0,\n        loading: true,\n        title: 'Add',\n        edit: false,\n        location: {},\n\n\n    };\n\n    componentWillMount() {\n        baseService.getCategories().then((categories) => this.setState({categories, loading: false}))\n        this.checkProps(this.props);\n\n    }\n\n    checkProps = (nextProps) => {\n        if (nextProps.edit) {\n            let location = nextProps.location;\n            if (location) {\n                //edit category\n                this.setState({\n                    location: nextProps.location,\n                    edit: true,\n                    title: 'Edit',\n                    name: location.name,\n                    nameAr: location.nameAr,\n                    desc: location.desc,\n                    descAr: location.descAr,\n                    locationCategories: location.categories,\n                    media: location.media,\n                    locationSocialMedia: location.socialMedia,\n\n                })\n            }\n\n        }\n    }\n\n    alert = (title) => {\n        confirmAlert({\n            title: '' + title,\n            message: '',\n            buttons: [{label: 'Dismiss'}]\n        });\n    };\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        this.checkProps(nextProps);\n\n    }\n\n    onChange = (key, e) => {\n        this.setState({[key]: e.target.value})\n    };\n    onCategoryChange = (e) => {\n        this.setState({selectedCategory: e.target.selectedIndex})\n    };\n    addCategory = () => {\n        let locationCategories = [...this.state.locationCategories];\n        if (locationCategories.includes(this.state.categories[this.state.selectedCategory])) {\n            alert('AddLocation already has this category');\n            return;\n        }\n        locationCategories.push(this.state.categories[this.state.selectedCategory]);\n        this.setState({locationCategories});\n    };\n\n    removeCategory = (index) => {\n\n        let locationCategories = [...this.state.locationCategories];\n        locationCategories.splice(index, 1);\n        this.setState({locationCategories});\n    };\n    updateSocialMediaList = (socialMediaList) => {\n        //keep social media sync\n        this.setState({locationSocialMedia: socialMediaList});\n\n    };\n    updateMediaFiles = (media) => {\n        this.setState({media});\n    }\n    addLocation = () => {\n        let categories = [];\n        this.state.locationCategories.map((category) => categories.push(category._id));\n        const {name, nameAr, desc, descAr, media, locationSocialMedia} = this.state;\n\n        if (categories.length === 0) {\n            alert('Please add categories to the location');\n            return;\n        } else if (media.length === 0 || name === '' || nameAr === '' || desc === '' || descAr === '') {\n            alert('Please fill all the fields');\n            return;\n        }\n\n        if (this.state.edit) {\n            let location = this.state.location;\n\n            location.name = this.state.name;\n            location.nameAr = this.state.nameAr;\n            location.desc = this.state.desc;\n            location.descAr = this.state.descAr;\n            location.categories = categories;\n            location.media = this.state.media;\n            location.socialMedia = this.state.locationSocialMedia;\n\n            baseService.updateLocation(location).then((response) =>{\n                if (this.props && this.props.updateLocation)\n                    this.props.updateLocation();\n            }).catch((err) => console.log(err));\n\n\n        } else {\n            let location = {\n                name: this.state.name,\n                nameAr: this.state.nameAr,\n                desc: this.state.desc,\n                descAr: this.state.descAr,\n                categories: categories,\n                media: this.state.media,\n                socialMedia: this.state.locationSocialMedia,\n            };\n            //just add it to the server\n            baseService.addLocation(location).catch((err) => console.log(err));\n            if(this.props &&this.props.handleClose){\n                //close the modal\n                this.props.handleClose()\n            }\n        }\n\n\n    };\n\n    render() {\n        if (this.state.categories.length === 0)\n            return (<div style={{color: 'red'}}>\n                Please Add Category first\n                <Button className=\"badge-info col-6\" href={'/Categories'}>\n                    <i className=\"fa fa-plus\"/> Add Category\n\n                </Button>\n            </div>);\n        return (\n            <div >\n\n                <Container class>\n\n\n                    <Form>\n                        <Form.Group as={Row}>\n                            <Form.Label column sm=\"2\">\n                                Name (English)\n                            </Form.Label>\n                            <Col sm=\"4\">\n                                <Form.Control type=\"text\" placeholder=\"Location name\"\n                                              onChange={(e) => this.onChange('name', e)} value={this.state.name}/>\n                            </Col>\n                            <Form.Label column sm=\"2\">\n                                Name (Arabic)\n                            </Form.Label>\n                            <Col sm=\"4\">\n                                <Form.Control type=\"text\" placeholder=\"Location name (Arabic)\"\n                                              onChange={(e) => this.onChange('nameAr', e)} value={this.state.nameAr}/>\n                            </Col>\n                        </Form.Group>\n\n                        <Form.Group as={Row} controlId=\"formPlaintextPassword\">\n                            <Form.Label column sm=\"2\">\n                                Description (English)\n                            </Form.Label>\n                            <Col sm=\"4\">\n                                <Form.Control as=\"textarea\" placeholder=\"Location Description\"\n                                              onChange={(e) => this.onChange('desc', e)} value={this.state.desc}/>\n                            </Col>\n                            <Form.Label column sm=\"2\">\n                                Description (Arabic)\n                            </Form.Label>\n                            <Col sm=\"4\">\n                                <Form.Control as=\"textarea\" placeholder=\"Location Description (Arabic)\"\n                                              onChange={(e) => this.onChange('descAr', e)} value={this.state.descAr}/>\n                            </Col>\n                        </Form.Group>\n\n\n                        <Form.Group>\n                            <Form.Label>\n                                Please choose category\n                            </Form.Label>\n                            <Form.Row>\n                                <Form.Group as={Col}>\n                                    <FormControl as={'select'} onChange={this.onCategoryChange}>\n                                        {this.state.categories.map((category, index) => {\n                                            return (\n                                                <option key={index}>{category.name} / {category.nameAr}</option>\n                                            )\n                                        })}\n                                    </FormControl>\n                                </Form.Group>\n\n                                <Form.Group as={Col} className={'center'}>\n                                    <Button className=\"badge-info col-6\" onClick={() => this.addCategory()}><i\n                                        className=\"fa fa-plus\"/> Add</Button>\n                                </Form.Group>\n                            </Form.Row>\n                        </Form.Group>\n\n                        <ListGroup>\n\n\n                            {this.state.locationCategories.length !== 0 ? this.state.locationCategories.map((category, index) => {\n                                    return (\n                                        <ListGroup.Item>\n                                            <div className={'row'}>\n                                                <img style={{width: 64, height: 64, padding: 5}} src={category.icon}/>\n                                                <p className={'col'}>{category.name} / {category.nameAr}</p>\n                                                <Button variant=\"danger\"\n                                                        onClick={() => this.removeCategory(index)}>Remove</Button>\n                                            </div>\n                                        </ListGroup.Item>\n                                    )\n                                }) :\n                                <ListGroup.Item>\n                                    <p className={'col'}>No categories yet</p>\n                                </ListGroup.Item>\n                            }\n\n\n                        </ListGroup>\n\n\n                        <Media media={this.state.media} updateMedia={this.updateMediaFiles}/>\n\n                        <div className={'p-2'}/>\n\n                        <SocialMedia socialMediaList={this.state.locationSocialMedia}\n                                     updateSocialMediaList={this.updateSocialMediaList}/>\n\n                        <div className={'p-2'}/>\n\n                        <Example showModal={this.state.modal}/>\n                        <Button variant=\"primary\"\n                                onClick={() => this.addLocation()}>{this.state.title} Location</Button>\n                    </Form>\n\n\n                </Container>\n\n\n            </div>\n        );\n    }\n}\n\nexport default AddLocation;\n\nclass Example extends Component {\n    state = {\n        modal: false,\n    }\n\n    handleClose = () => this.setState({modal: false});\n    handleShow = () => this.setState({modal: true});\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        //console.log(\"i;m recving \",nextProps)\n        this.setState({modal: nextProps.showModal})\n    }\n\n    render() {\n        return (\n            <div className={\"modal-dialog modal-lg\"}>\n\n                <Modal show={this.state.modal} onHide={this.handleClose} >\n                    <Modal.Header closeButton>\n                        <Modal.Title>Modal heading</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>Woohoo, you're reading this text in a modal!</Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={this.handleClose}>\n                            Close\n                        </Button>\n                        <Button variant=\"primary\" onClick={this.handleClose}>\n                            Save Changes\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </div>\n        );\n    }\n}\n\n//export default Example;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/inherits\";import _slicedToArray from\"/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Component}from'react';var SortableList=function SortableList(_ref){var _ref$sortable=_ref.sortable,sortable=_ref$sortable===void 0?true:_ref$sortable,_ref$data=_ref.data,data=_ref$data===void 0?[]:_ref$data,_ref$onReorder=_ref.onReorder,onReorder=_ref$onReorder===void 0?function(){}:_ref$onReorder,_ref$renderItem=_ref.renderItem,renderItem=_ref$renderItem===void 0?function(){}:_ref$renderItem,_ref$keyExtractor=_ref.keyExtractor,keyExtractor=_ref$keyExtractor===void 0?function(){}:_ref$keyExtractor,_ref$transitionDurati=_ref.transitionDuration,transitionDuration=_ref$transitionDurati===void 0?200:_ref$transitionDurati,_ref$separator=_ref.separator,separator=_ref$separator===void 0?null:_ref$separator;var listRef=React.useRef(null);var separatorsRef=React.useRef(data.map(function(){return React.createRef();}));var itemsRef=React.useRef(data.map(function(d,i){return React.createRef();}));var _React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),active=_React$useState2[0],setActive=_React$useState2[1];var _React$useState3=React.useState(data.map(function(d,i){return i;})),_React$useState4=_slicedToArray(_React$useState3,2),currentOrder=_React$useState4[0],setCurrentOrder=_React$useState4[1];var onSortStart=function onSortStart(event){return sortable&&sortStart(event,data,listRef,itemsRef,separatorsRef,onReorder,setActive,setCurrentOrder,transitionDuration);};return React.createElement(\"div\",{ref:listRef},data.map(function(item,index){return React.createElement(\"div\",{key:keyExtractor(item,index)},React.createElement(\"div\",{ref:itemsRef.current[index],onMouseDown:onSortStart,onTouchStart:onSortStart,children:renderItem(item,currentOrder[index],active===index)}),separator&&index<data.length-1&&React.createElement(\"div\",{ref:separatorsRef.current[index]},separator));}));};var sortStart=function sortStart(event,data,listRef,itemsRef,separatorsRef,onReorder,setActive,setCurrentOrder,transitionDuration){try{if(itemsRef.current.length<2)return;if(event.type==='mousedown'&&event.button>0)return;if(event.type==='touchstart'&&event.touches.length>1)return;var list=listRef.current;if(list.classList.contains('is-sorting'))return;list.classList.add('is-sorting');var css=function css(item,_css){return Object.keys(_css).forEach(function(style){return item.style[style]=_css[style];});};css(list,{position:'relative',height:list.offsetHeight+'px',width:list.offsetWidth+'px'});var separators=separatorsRef.current.filter(function(ref){return ref.current;}).map(function(ref,index){var dom=ref.current;if(dom)return{index:index,dom:dom,left:dom.offsetLeft,top:dom.offsetTop,width:dom.offsetWidth,height:dom.offsetHeight};});var items=itemsRef.current.filter(function(ref){return ref.current;}).map(function(ref,index){var dom=ref.current;if(dom)return{index:index,dom:dom,left:dom.offsetLeft,top:dom.offsetTop,width:dom.offsetWidth,height:dom.offsetHeight,x:dom.offsetLeft,y:dom.offsetTop,dragged:dom.contains(event.target)};});var dragged=items.find(function(item){return item.dragged;});var spacing=items[1].top-(items[0].top+items[0].height);var curIndex=items.indexOf(dragged);var newOrder=items.map(function(item){return item.index;});setActive(curIndex);draggable(event,{onStart:function onStart(){separators.map(function(separator){return css(separator.dom,{position:'absolute',width:separator.width+'px',height:separator.height+'px',left:separator.left+'px',top:separator.top+'px',zIndex:1});});items.map(function(item){css(item.dom,{position:'absolute',width:item.width+'px',height:item.height+'px',transform:\"translateX(\".concat(item.x,\"px) translateY(\").concat(item.y,\"px)\"),zIndex:2});setTimeout(function(){if(item.dragged)return;css(item.dom,{transition:\"transform \".concat(transitionDuration,\"ms ease\")});});});css(dragged.dom,{zIndex:3});},onMove:function onMove(delta){var draggX=dragged.left+delta.x;var draggY=dragged.top+delta.y;var dragIndex=items.reduce(function(acc,item){if(item.index===0)return acc;var shadowCenter=draggY+dragged.height/2;var itemStart=item.top-spacing/2;return acc+=shadowCenter>itemStart?1:0;},0);if(dragIndex!==curIndex){newOrder[dragIndex]=newOrder.splice(curIndex,1,newOrder[dragIndex])[0];curIndex=dragIndex;newOrder.reduce(function(acc,index){var item=items[index];item.y=acc;css(item.dom,{transform:\"translateX(\".concat(item.x,\") translateY(\").concat(item.y,\"px)\")});return acc+=item.height+spacing;},0);setCurrentOrder(newOrder.reduce(function(acc,cur,idx){acc[newOrder[idx]]=idx;return acc;},[]));}css(dragged.dom,{transform:\"translateX(\".concat(draggX,\"px) translateY(\").concat(draggY,\"px)\")});},onEnd:function onEnd(){setActive(null);css(dragged.dom,{transition:\"all \".concat(transitionDuration,\"ms ease\"),transform:\"translateX(\".concat(dragged.x,\") translateY(\").concat(dragged.y,\"px)\")});setTimeout(function(){list.style=null;list.classList.remove('is-sorting');items.map(function(item){return item.dom.style=null;});separators.map(function(separator){return separator.dom.style=null;});setCurrentOrder(items.map(function(item){return item.index;}));onReorder(items.reduce(function(acc,cur,idx){acc[idx]=data[newOrder[idx]];return acc;},[]));},transitionDuration);}});}catch(e){console.log(e);}};var draggable=function draggable(e,_ref2){var onStart=_ref2.onStart,onMove=_ref2.onMove,onEnd=_ref2.onEnd;try{var startPosition;var onDragStart=function onDragStart(e){var currentPosition=getPosition(e);onStart(startPosition);startPosition=currentPosition;var touch=e.type==='touchstart';window.addEventListener(touch?'touchmove':'mousemove',onDragMove,{passive:false});window.addEventListener(touch?'touchend':'mouseup',onDragEnd,false);};var onDragMove=function onDragMove(e){var currentPosition=getPosition(e);var deltaPosition={x:currentPosition.x-startPosition.x,y:currentPosition.y-startPosition.y};onMove(deltaPosition,currentPosition);e.preventDefault();};var onDragEnd=function onDragEnd(e){var currentPosition=getPosition(e);onEnd(currentPosition);var touch=e.type==='touchend';window.removeEventListener(touch?'touchmove':'mousemove',onDragMove,{passive:false});window.removeEventListener(touch?'touchend':'mouseup',onDragEnd,false);};var getPosition=function getPosition(e){var dragEvent=e.touches?e.touches[0]||e.changedTouches[0]:e;return{x:dragEvent.pageX,y:dragEvent.pageY};};onDragStart(e);}catch(e){console.log(e);}};var DragableList=/*#__PURE__*/function(_Component){_inherits(DragableList,_Component);function DragableList(){var _getPrototypeOf2;var _this;_classCallCheck(this,DragableList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DragableList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:[]};return _this;}_createClass(DragableList,[{key:\"componentWillMount\",value:function componentWillMount(){//console.log('dragable list will mounnt',this.props)\nif(this.props&&this.props.data)this.setState({data:this.props.data});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps,nextContext){//console.log('dragable list will recv props',nextProps)\nif(nextProps&&nextProps.data){this.setState({data:nextProps.data});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(SortableList,{data:this.state.data,renderItem:function renderItem(item,index,active){return _this2.props.renderItem(item,index,active);},keyExtractor:function keyExtractor(item){return item._id;},onReorder:function onReorder(ordered){return _this2.props.reOrder(ordered);},separator:React.createElement(\"div\",{className:\"separator\"})});}}]);return DragableList;}(Component);export default DragableList;","map":{"version":3,"sources":["/Users/alaaeldin/Documents/GitHub/gateofegyptadmin/src/customComponents/DragableList.js"],"names":["React","Component","SortableList","sortable","data","onReorder","renderItem","keyExtractor","transitionDuration","separator","listRef","useRef","separatorsRef","map","createRef","itemsRef","d","i","useState","active","setActive","currentOrder","setCurrentOrder","onSortStart","event","sortStart","item","index","current","length","type","button","touches","list","classList","contains","add","css","Object","keys","forEach","style","position","height","offsetHeight","width","offsetWidth","separators","filter","ref","dom","left","offsetLeft","top","offsetTop","items","x","y","dragged","target","find","spacing","curIndex","indexOf","newOrder","draggable","onStart","zIndex","transform","setTimeout","transition","onMove","delta","draggX","draggY","dragIndex","reduce","acc","shadowCenter","itemStart","splice","cur","idx","onEnd","remove","e","console","log","startPosition","onDragStart","currentPosition","getPosition","touch","window","addEventListener","onDragMove","passive","onDragEnd","deltaPosition","preventDefault","removeEventListener","dragEvent","changedTouches","pageX","pageY","DragableList","state","props","setState","nextProps","nextContext","_id","ordered","reOrder"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nconst SortableList = ({\n                          sortable = true,\n                          data = [],\n                          onReorder = () => {\n                          },\n                          renderItem = () => {\n                          },\n                          keyExtractor = () => {\n                          },\n                          transitionDuration = 200,\n                          separator = null,\n                      }) => {\n    const listRef = React.useRef(null)\n    const separatorsRef = React.useRef(data.map(() => React.createRef()))\n    const itemsRef = React.useRef(data.map((d, i) => React.createRef()))\n    const [active, setActive] = React.useState(null)\n    const [currentOrder, setCurrentOrder] = React.useState(data.map((d, i) => i))\n\n    const onSortStart = event => sortable && sortStart(\n        event,\n        data,\n        listRef,\n        itemsRef,\n        separatorsRef,\n        onReorder,\n        setActive,\n        setCurrentOrder,\n        transitionDuration\n    )\n\n    return (\n        <div ref={listRef}>\n            {data.map((item, index) =>\n                <div key={keyExtractor(item, index)}>\n                    <div\n                        ref={itemsRef.current[index]}\n                        onMouseDown={onSortStart}\n                        onTouchStart={onSortStart}\n                        children={renderItem(item, currentOrder[index], active === index)}\n                    />\n                    {separator && index < data.length - 1 &&\n                    <div ref={separatorsRef.current[index]}>\n                        {separator}\n                    </div>\n                    }\n                </div>\n            )}\n        </div>\n    )\n}\n\nconst sortStart = (\n    event,\n    data,\n    listRef,\n    itemsRef,\n    separatorsRef,\n    onReorder,\n    setActive,\n    setCurrentOrder,\n    transitionDuration,\n) => {\n    try{\n        if (itemsRef.current.length < 2) return\n        if (event.type === 'mousedown' && event.button > 0) return\n        if (event.type === 'touchstart' && event.touches.length > 1) return\n\n        const list = listRef.current\n        if (list.classList.contains('is-sorting')) return\n        list.classList.add('is-sorting')\n\n        const css = (item, css) => Object.keys(css).forEach(style => item.style[style] = css[style])\n\n        css(list, {\n            position: 'relative',\n            height: list.offsetHeight + 'px',\n            width: list.offsetWidth + 'px',\n        })\n\n        const separators = separatorsRef.current.filter(ref => ref.current).map((ref, index) => {\n            const dom = ref.current\n            if (dom) return {\n                index: index,\n                dom: dom,\n                left: dom.offsetLeft,\n                top: dom.offsetTop,\n                width: dom.offsetWidth,\n                height: dom.offsetHeight,\n            }\n        })\n\n        const items = itemsRef.current.filter(ref => ref.current).map((ref, index) => {\n            const dom = ref.current\n            if (dom) return {\n                index: index,\n                dom: dom,\n                left: dom.offsetLeft,\n                top: dom.offsetTop,\n                width: dom.offsetWidth,\n                height: dom.offsetHeight,\n                x: dom.offsetLeft,\n                y: dom.offsetTop,\n                dragged: dom.contains(event.target)\n            }\n        })\n\n        const dragged = items.find(item => item.dragged)\n        const spacing = items[1].top - (items[0].top + items[0].height)\n\n        let curIndex = items.indexOf(dragged)\n        let newOrder = items.map(item => item.index)\n\n        setActive(curIndex)\n\n        draggable(event, {\n            onStart: () => {\n                separators.map(separator => css(separator.dom, {\n                    position: 'absolute',\n                    width: separator.width + 'px',\n                    height: separator.height + 'px',\n                    left: separator.left + 'px',\n                    top: separator.top + 'px',\n                    zIndex: 1,\n                }))\n\n                items.map(item => {\n                    css(item.dom, {\n                        position: 'absolute',\n                        width: item.width + 'px',\n                        height: item.height + 'px',\n                        transform: `translateX(${item.x}px) translateY(${item.y}px)`,\n                        zIndex: 2,\n                    })\n                    setTimeout(() => {\n                        if (item.dragged) return\n                        css(item.dom, {transition: `transform ${transitionDuration}ms ease`})\n                    })\n                })\n\n                css(dragged.dom, {zIndex: 3})\n            },\n            onMove: delta => {\n                const draggX = dragged.left + delta.x\n                const draggY = dragged.top + delta.y\n\n                const dragIndex = items.reduce((acc, item) => {\n                    if (item.index === 0) return acc\n                    const shadowCenter = draggY + dragged.height / 2\n                    const itemStart = item.top - spacing / 2\n                    return acc += (shadowCenter > itemStart) ? 1 : 0\n                }, 0)\n\n                if (dragIndex !== curIndex) {\n                    newOrder[dragIndex] = newOrder.splice(curIndex, 1, newOrder[dragIndex])[0]\n                    curIndex = dragIndex\n\n                    newOrder.reduce((acc, index) => {\n                        const item = items[index]\n                        item.y = acc\n                        css(item.dom, {transform: `translateX(${item.x}) translateY(${item.y}px)`})\n                        return acc += item.height + spacing\n                    }, 0)\n\n                    setCurrentOrder(newOrder.reduce((acc, cur, idx) => {\n                        acc[newOrder[idx]] = idx\n                        return acc\n                    }, []))\n                }\n\n                css(dragged.dom, {transform: `translateX(${draggX}px) translateY(${draggY}px)`})\n            },\n            onEnd: () => {\n                setActive(null)\n\n                css(dragged.dom, {\n                    transition: `all ${transitionDuration}ms ease`,\n                    transform: `translateX(${dragged.x}) translateY(${dragged.y}px)`,\n                })\n\n                setTimeout(() => {\n                    list.style = null\n                    list.classList.remove('is-sorting')\n                    items.map(item => item.dom.style = null)\n                    separators.map(separator => separator.dom.style = null)\n                    setCurrentOrder(items.map(item => item.index))\n                    onReorder(items.reduce((acc, cur, idx) => {\n                        acc[idx] = data[newOrder[idx]]\n                        return acc\n                    }, []))\n                }, transitionDuration)\n            }\n        })\n\n\n    }\n   catch (e) {\n       console.log(e)\n   }\n\n\n}\n\nconst draggable = (e, {onStart, onMove, onEnd}) => {\n    try{\n        let startPosition\n\n        const onDragStart = e => {\n            const currentPosition = getPosition(e)\n            onStart(startPosition)\n            startPosition = currentPosition\n            const touch = e.type === 'touchstart'\n            window.addEventListener((touch ? 'touchmove' : 'mousemove'), onDragMove, {passive: false})\n            window.addEventListener((touch ? 'touchend' : 'mouseup'), onDragEnd, false)\n        }\n\n        const onDragMove = e => {\n            const currentPosition = getPosition(e)\n            const deltaPosition = {\n                x: currentPosition.x - startPosition.x,\n                y: currentPosition.y - startPosition.y,\n            }\n            onMove(deltaPosition, currentPosition)\n            e.preventDefault()\n        }\n\n        const onDragEnd = e => {\n            const currentPosition = getPosition(e)\n            onEnd(currentPosition)\n            const touch = e.type === 'touchend'\n            window.removeEventListener((touch ? 'touchmove' : 'mousemove'), onDragMove, {passive: false})\n            window.removeEventListener((touch ? 'touchend' : 'mouseup'), onDragEnd, false)\n        }\n\n        const getPosition = e => {\n            const dragEvent = e.touches ? (e.touches[0] || e.changedTouches[0]) : e\n            return {x: dragEvent.pageX, y: dragEvent.pageY}\n        }\n\n        onDragStart(e)\n    }catch (e) {\n        console.log(e)\n    }\n\n}\n\n\n\n\nclass DragableList extends Component {\n    state = {\n        data: []\n    }\n\n    componentWillMount() {\n        //console.log('dragable list will mounnt',this.props)\n        if (this.props && this.props.data)\n            this.setState({data: this.props.data})\n    }\n\n    componentWillReceiveProps(nextProps, nextContext) {\n        //console.log('dragable list will recv props',nextProps)\n        if (nextProps && nextProps.data){\n\n            this.setState({data: nextProps.data})\n        }\n    }\n\n    render() {\n        return (\n            <SortableList\n                data={this.state.data}\n                renderItem={(item, index, active) => this.props.renderItem(item, index,active)}\n                keyExtractor={item => item._id}\n                onReorder={ordered => this.props.reOrder(ordered)}\n                separator={<div className=\"separator\"/>}\n            />\n        );\n    }\n}\n\n\nexport default DragableList\n"]},"metadata":{},"sourceType":"module"}
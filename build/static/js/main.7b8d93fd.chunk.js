(window.webpackJsonptazweedadminpanel=window.webpackJsonptazweedadminpanel||[]).push([[0],{140:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(13),c=n.n(o),l=(n(95),n(69),n(28)),i=n(29),s=n(14),u=n(15),m=n(21),p=n(20),h=n(22),d=(n(96),n(31)),f=n(147),E=n(85),v=n(9),g=n.n(v),b=n(23),y="http://tazweed.ay-legend.com:8000/api",k=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"getApiUrl",value:function(){return y}},{key:"getToken",value:function(){return"Bearer "+window.localStorage.getItem("token")}},{key:"getTimeSlots",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/timeSlots/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.getToken()}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addTimeSlot",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/timeSlots/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTimeSlot",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/timeSlots/"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAppointments",value:function(){var e=Object(b.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/appointments/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.getToken()}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateAppointment",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/appointments/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkLogin",value:function(){var e=window.localStorage.getItem("token");return!!(e&&""!==e&&e.length>10)&&(console.log("am check login and returning true"),!0)}},{key:"logout",value:function(){return window.localStorage.removeItem("token")}},{key:"login",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(b.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(y,"/users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",error:""},n.dismissError=function(){n.setState({error:""})},n.handleSubmit=function(e){return e.preventDefault(),n.state.username&&""!==n.state.username?n.state.password&&""!==n.state.password?void k.login({username:n.state.username,password:n.state.password,seller:!0}).then((function(e){e&&e.token?(window.localStorage.setItem("token",e.token),n.props.history.push("/appointments")):alert("Login Failed please try again")})).catch((function(e){console.log(e)})):alert("Password is required"):alert("username is required")},n.onChange=function(e,t){n.setState(Object(d.a)({},e,t.target.value))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return k.checkLogin()&&this.props&&this.props.history&&this.props.history.push("/Appointments"),r.a.createElement("div",null,r.a.createElement("center",null,r.a.createElement("h2",null,"Login")),r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Username"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter username",value:this.state.username,onChange:function(t){return e.onChange("username",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Password"),r.a.createElement(f.a.Control,{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.onChange("password",t)}})),r.a.createElement("center",null,r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:function(t){return e.handleSubmit(t)}},"Login"))))}}]),t}(a.Component);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(d.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",type:2,name:"",nameAr:"",desc:"",descAr:""},n.onChange=function(e,t){n.setState(Object(d.a)({},e,t.target.value))},n.register=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==(a=S({},n.state)).username&&""!==a.password&&""!==a.name&&""!==a.nameAr){e.next=5;break}return alert("Please fill all fields"),e.abrupt("return");case 5:return e.next=7,k.register(a);case 7:e.sent?(alert("Registered successfully"),n.props.history.push("/Login")):alert("failed to register");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",{className:"center"},"Register"),r.a.createElement(f.a,null,r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Username"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter username",onChange:function(t){return e.onChange("username",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Password"),r.a.createElement(f.a.Control,{type:"password",placeholder:"Enter Password",onChange:function(t){return e.onChange("password",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Shop Name"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter shop name",onChange:function(t){return e.onChange("name",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Shop Name (Ar)"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter arabic shop name",onChange:function(t){return e.onChange("nameAr",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Description"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter shop description",onChange:function(t){return e.onChange("desc",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(f.a.Label,null,"Description (Ar)"),r.a.createElement(f.a.Control,{type:"text",placeholder:"Enter shop arabic description",onChange:function(t){return e.onChange("descAr",t)}})),r.a.createElement("center",null,r.a.createElement(E.a,{variant:"primary",type:"submit",onClick:function(t){return e.register(t)}},"Submit"))))}}]),t}(a.Component),T=n(45),C=n.n(T),A=n(58),x=n.n(A),P=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={type:"login"},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{flex:1,minHeight:"100%",backgroundPosition:"center",backgroundSize:"cover"}},r.a.createElement("body",{style:{padding:50}},r.a.createElement("h2",null,"Tazweed Test Seller Panel"),r.a.createElement(x.a,{id:"controlled-tab-example",activeKey:this.state.type,onSelect:function(t){return e.setState({type:t})}},r.a.createElement(C.a,{eventKey:"login",title:"Login"},r.a.createElement(w,{history:this.props.history})),r.a.createElement(C.a,{eventKey:"register",title:"Registration"},r.a.createElement(O,{history:this.props.history})))))}}]),t}(a.Component);function D(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Tazweed Admin panel"),r.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/appointments",className:"nav-link"}," Appointments ")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/addTimeSlot",className:"nav-link"},"Add Time slot")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/Logout",className:"nav-link"},"Logout")))))}var L=n(41),N=n(148),I=(n(118),function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={timeSlots:[],startTime:"",endTime:""},n.getTimeSlots=function(){k.getTimeSlots().then((function(e){console.log("timeslots from the server ",e),n.setState({timeSlots:e})}))},n.onChange=function(e,t){n.setState(Object(d.a)({},e,t.target.value))},n.checkTimeValidity=function(){var e=!0;return n.state.timeSlots.forEach((function(t){n.state.startTime!=t.startTime&&n.state.endTime!=t.endTime||(e=!1)})),e},n.addTime=function(){var e=Object(L.a)(n.state.timeSlots);""!==n.state.startTime&&""!==n.state.endTime?n.checkTimeValidity()?(e.push({startTime:n.state.startTime,endTime:n.state.endTime}),k.addTimeSlot(e).then((function(e){n.getTimeSlots(),n.setState({startTime:"",endTime:""})})).catch((function(e){return console.log(e)}))):alert("Time conflict"):alert("Please enter valid time")},n.removeTimeSlot=function(e){if(window.confirm("Are you sure you want to this time slot? It won't affect the current booked appointments, it will be applied for the future appointments")){var t=Object(L.a)(n.state.timeSlots);t.splice(e,1),k.deleteTimeSlot(t).then((function(e){n.getTimeSlots()})).catch((function(e){return console.log(e)}))}},n.timeConvert=function(e){var t=(e=e.startTime+" to "+e.endTime).split(" to ");return t.map((function(n,a){(n=n.toString().match(/^([01]\d|2[0-3])(:)([0-5]\d)(:[0-5]\d)?$/)||[e]).length>1&&((n=n.slice(1))[5]=+n[0]<12?"AM":"PM",n[0]=+n[0]%12||12),t[a]=n.join(""),0===a&&(t[a]+=" to ")})),t},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.getTimeSlots()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"col-9"},r.a.createElement("h2",null,"Add time slot"),r.a.createElement(f.a,null,r.a.createElement(f.a.Row,null,r.a.createElement(f.a.Group,{className:"col"},r.a.createElement(f.a.Label,null,"From"),r.a.createElement(f.a.Control,{type:"time",placeholder:"enter start time",value:this.state.startTime,onChange:function(t){return e.onChange("startTime",t)}})),r.a.createElement(f.a.Group,{className:"col"},r.a.createElement(f.a.Label,null,"To"),r.a.createElement(f.a.Control,{type:"time",placeholder:"enter ending time",value:this.state.endTime,onChange:function(t){return e.onChange("endTime",t)}})),r.a.createElement(f.a.Group,null,r.a.createElement(E.a,{variant:"success",onClick:this.addTime},r.a.createElement("i",{className:"fa fa-plus"})," Add")))),this.state.timeSlots.map((function(t,n){return r.a.createElement(N.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col"},e.timeConvert(t)),r.a.createElement(E.a,{variant:"danger",onClick:function(){return e.removeTimeSlot(n)}},"Remove")))})))}}]),t}(a.Component)),G=n(145),z=n(149),R=n(146),F=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(R.a,{show:this.props.show,onHide:this.props.close},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,"Confirmation Modal")),r.a.createElement(R.a.Body,null,"Please choose your action."),r.a.createElement(R.a.Footer,null,r.a.createElement(E.a,{variant:"secondary",onClick:this.props.close},"Close"),r.a.createElement(E.a,{variant:"primary",onClick:this.props.reject},"Reject")," ",r.a.createElement(E.a,{variant:"primary",onClick:this.props.accept},"Accept"))))}}]),t}(a.Component),J=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={appointments:[],appointmentsFiltered:[],show:!1,selectedAppointment:{},filter:"All"},n.eventClicked=function(e){alert(e)},n.close=function(){n.setState({show:!1})},n.updateAppointmentStatus=function(){var e=Object(b.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=n.state.selectedAppointment).status=t,e.next=4,k.updateAppointment(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.accept=function(){n.updateAppointmentStatus("Accepted"),n.close()},n.reject=function(){n.updateAppointmentStatus("Rejected"),n.close()},n.filter=function(e){if(n.setState({filter:e}),"All"!==e){var t=Object(L.a)(n.state.appointments);t=t.filter((function(t){return"Pending"===e||"Accepted"===e||"Rejected"===e?t.status==e:"Coming"===e?t.appointmentDate<(new Date).toDateString():"Past"===e?t.appointmentDate>(new Date).toDateString():"Today"===e?t.appointmentDate==(new Date).toDateString():void 0})),n.setState({appointmentsFiltered:t})}else n.setState({appointmentsFiltered:n.state.appointments})},n.onAppointmentClick=function(e,t){e.preventDefault(),n.setState({selectedAppointment:t,show:!0})},n.renderAppointments=function(){return r.a.createElement(G.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Request Date"),r.a.createElement("th",null,"Appointment Time"),r.a.createElement("th",null,"Appointment Date"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,n.state.appointmentsFiltered.length>0?n.state.appointmentsFiltered.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.clientId.username),r.a.createElement("td",null,new Date(e.requestDate).toDateString()),r.a.createElement("td",null,e.time),r.a.createElement("td",null,e.appointmentDate),r.a.createElement("td",null,e.status),r.a.createElement("td",null,"Pending"!==e.status?r.a.createElement("p",null,"Action Taken"):r.a.createElement("a",{href:"",onClick:function(t){return n.onAppointmentClick(t,e)}},"Take Action")))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:7},r.a.createElement("p",{className:"center"},"there is no ","All"!==n.state.filter&&n.state.filter.toLowerCase()," appointments yet")))))},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;k.getAppointments().then((function(t){e.setState({appointments:t,appointmentsFiltered:t})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Appointments"),r.a.createElement(z.a,null,r.a.createElement(z.a.Toggle,{variant:"success",id:"dropdown-basic"},"(",this.state.filter,") Appointments"),r.a.createElement(z.a.Menu,null,r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("All")}},"All"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Today")}},"Today"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Pending")}},"Pending"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Accepted")}},"Accepted"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Rejected")}},"Rejected"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Past")}},"Past"),r.a.createElement(z.a.Item,{onSelect:function(){return e.filter("Coming")}},"Coming"))),this.renderAppointments(),r.a.createElement(F,{show:this.state.show,close:this.close,accept:this.accept,reject:this.reject}))}}]),t}(a.Component);var M=function(e){for(var t=e.component,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return k.checkLogin()?r.a.createElement("div",null,r.a.createElement(D,null)," ",r.a.createElement(t,e)):r.a.createElement(i.a,{to:{pathname:"/",state:{from:e.location}}})}}))},U=Object(i.g)((function(e){var t=e.history;return k.logout(),t.push("/"),null})),q=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:P}),r.a.createElement(M,{exact:!0,path:"/addTimeSlot",component:I}),r.a.createElement(M,{exact:!0,path:"/Appointments",component:J}),r.a.createElement(i.b,{exact:!0,path:"/Login",component:w}),r.a.createElement(i.b,{exact:!0,path:"/Logout",component:U})))};n(138);var B=function(){return r.a.createElement(q,null)};n(139);c.a.render(r.a.createElement(B,null),document.getElementById("root"))},69:function(e,t,n){},90:function(e,t,n){e.exports=n(140)},95:function(e,t,n){},96:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.7b8d93fd.chunk.js.map
(window.webpackJsonpgateofegyptadmin=window.webpackJsonpgateofegyptadmin||[]).push([[0],{134:function(e,t,a){},214:function(e,t,a){e.exports=a(450)},219:function(e,t,a){},220:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},221:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),c=a.n(o),l=(a(219),a(134),a(220),a(32)),i=a(37),s=a(7),u=a(8),d=a(10),m=a(9),p=a(11),h=(a(221),function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{flex:1,minHeight:"100%",backgroundPosition:"center",backgroundSize:"cover"}},r.a.createElement("body",null,r.a.createElement("header",{class:"header"},r.a.createElement("div",{class:"w-container"},r.a.createElement("div",{class:"logo-wrapper w-clearfix"},r.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5d9ceab8ccdd266e2c43882b/5d9ceab9ccdd263edf43883b_logo-white.png",width:"56",alt:"",class:"logo-icon"}),r.a.createElement("h1",{class:"logo-text"},"Gate Of Egypt")),r.a.createElement("h1",null,"Find Places."),r.a.createElement("p",{class:"main-subtitle"},"Gate of Egypt is a mobile app that helps you to find places well sorted under category, sub-category in adiition to location"),r.a.createElement("a",{href:"itms-services://?action=download-manifest&url=https://goe.ay-legend.com/info.plist",class:"app-button w-inline-block"},r.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5d9ceab8ccdd266e2c43882b/5d9ceab9ccdd267e92438840_app-store-apple.png",width:"141",alt:""})),r.a.createElement("a",{href:"#",class:"app-button w-inline-block"},r.a.createElement("img",{src:"https://uploads-ssl.webflow.com/5d9ceab8ccdd266e2c43882b/5d9ceab9ccdd26d2fe43883a_app-store-google.png",width:"141",alt:""}))))))}}]),t}(n.Component)),f=a(132),g=function(e){var t=e.sortable,a=void 0===t||t,n=e.data,o=void 0===n?[]:n,c=e.onReorder,l=void 0===c?function(){}:c,i=e.renderItem,s=void 0===i?function(){}:i,u=e.keyExtractor,d=void 0===u?function(){}:u,m=e.transitionDuration,p=void 0===m?200:m,h=e.separator,g=void 0===h?null:h,b=r.a.useRef(null),y=r.a.useRef(o.map((function(){return r.a.createRef()}))),v=r.a.useRef(o.map((function(e,t){return r.a.createRef()}))),C=r.a.useState(null),k=Object(f.a)(C,2),x=k[0],w=k[1],S=r.a.useState(o.map((function(e,t){return t}))),j=Object(f.a)(S,2),I=j[0],O=j[1],A=function(e){return a&&E(e,o,b,v,y,l,w,O,p)};return r.a.createElement("div",{ref:b},o.map((function(e,t){return r.a.createElement("div",{key:d(e,t)},r.a.createElement("div",{ref:v.current[t],onMouseDown:A,onTouchStart:A,children:s(e,I[t],x===t)}),g&&t<o.length-1&&r.a.createElement("div",{ref:y.current[t]},g))})))},E=function(e,t,a,n,r,o,c,l,i){try{if(n.current.length<2)return;if("mousedown"===e.type&&e.button>0)return;if("touchstart"===e.type&&e.touches.length>1)return;var s=a.current;if(s.classList.contains("is-sorting"))return;s.classList.add("is-sorting");var u=function(e,t){return Object.keys(t).forEach((function(a){return e.style[a]=t[a]}))};u(s,{position:"relative",height:s.offsetHeight+"px",width:s.offsetWidth+"px"});var d=r.current.filter((function(e){return e.current})).map((function(e,t){var a=e.current;if(a)return{index:t,dom:a,left:a.offsetLeft,top:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}})),m=n.current.filter((function(e){return e.current})).map((function(t,a){var n=t.current;if(n)return{index:a,dom:n,left:n.offsetLeft,top:n.offsetTop,width:n.offsetWidth,height:n.offsetHeight,x:n.offsetLeft,y:n.offsetTop,dragged:n.contains(e.target)}})),p=m.find((function(e){return e.dragged})),h=m[1].top-(m[0].top+m[0].height),f=m.indexOf(p),g=m.map((function(e){return e.index}));c(f),b(e,{onStart:function(){d.map((function(e){return u(e.dom,{position:"absolute",width:e.width+"px",height:e.height+"px",left:e.left+"px",top:e.top+"px",zIndex:1})})),m.map((function(e){u(e.dom,{position:"absolute",width:e.width+"px",height:e.height+"px",transform:"translateX(".concat(e.x,"px) translateY(").concat(e.y,"px)"),zIndex:2}),setTimeout((function(){e.dragged||u(e.dom,{transition:"transform ".concat(i,"ms ease")})}))})),u(p.dom,{zIndex:3})},onMove:function(e){var t=p.left+e.x,a=p.top+e.y,n=m.reduce((function(e,t){return 0===t.index?e:e+(a+p.height/2>t.top-h/2?1:0)}),0);n!==f&&(g[n]=g.splice(f,1,g[n])[0],f=n,g.reduce((function(e,t){var a=m[t];return a.y=e,u(a.dom,{transform:"translateX(".concat(a.x,") translateY(").concat(a.y,"px)")}),e+(a.height+h)}),0),l(g.reduce((function(e,t,a){return e[g[a]]=a,e}),[]))),u(p.dom,{transform:"translateX(".concat(t,"px) translateY(").concat(a,"px)")})},onEnd:function(){c(null),u(p.dom,{transition:"all ".concat(i,"ms ease"),transform:"translateX(".concat(p.x,") translateY(").concat(p.y,"px)")}),setTimeout((function(){s.style=null,s.classList.remove("is-sorting"),m.map((function(e){return e.dom.style=null})),d.map((function(e){return e.dom.style=null})),l(m.map((function(e){return e.index}))),o(m.reduce((function(e,a,n){return e[n]=t[g[n]],e}),[]))}),i)}})}catch(E){console.log(E)}},b=function(e,t){var a=t.onStart,n=t.onMove,r=t.onEnd;try{var o,c=function(e){var t=i(e),a={x:t.x-o.x,y:t.y-o.y};n(a,t),e.preventDefault()},l=function e(t){var a=i(t);r(a);var n="touchend"===t.type;window.removeEventListener(n?"touchmove":"mousemove",c,{passive:!1}),window.removeEventListener(n?"touchend":"mouseup",e,!1)},i=function(e){var t=e.touches?e.touches[0]||e.changedTouches[0]:e;return{x:t.pageX,y:t.pageY}};!function(e){var t=i(e);a(o),o=t;var n="touchstart"===e.type;window.addEventListener(n?"touchmove":"mousemove",c,{passive:!1}),window.addEventListener(n?"touchend":"mouseup",l,!1)}(e)}catch(e){console.log(e)}},y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:[]},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props&&this.props.data&&this.setState({data:this.props.data})}},{key:"componentWillReceiveProps",value:function(e,t){e&&e.data&&this.setState({data:e.data})}},{key:"render",value:function(){var e=this;return r.a.createElement(g,{data:this.state.data,renderItem:function(t,a,n){return e.props.renderItem(t,a,n)},keyExtractor:function(e){return e._id},onReorder:function(t){return e.props.reOrder(t)},separator:r.a.createElement("div",{className:"separator"})})}}]),t}(n.Component),v=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"About"),r.a.createElement(y,null))}}]),t}(n.Component),C=a(13),k=a(16),x=a(453),w=a(454),S=a(459),j=a(455),I=a(205),O=a(204),A=a(460),L=a(457),N=a(3),M=a.n(N),P=a(12),T=a(31),W=a(458),F=a(452),D=a(82),G=a.n(D),J="http://goe.ay-legend.com:1112/api",R=function(){function e(){Object(s.a)(this,e)}return Object(u.a)(e,null,[{key:"getApiUrl",value:function(){return J}},{key:"getToken",value:function(){return"Bearer "+window.localStorage.getItem("token")}},{key:"getCategories",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/category/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getVisitors",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/visitor/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:this.getToken()}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/category/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/category/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/category/"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addSubCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/subcategory/").concat(t._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(a)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateSubCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/subCategory/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(a)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"deleteSubCategory",value:function(){var e=Object(P.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/subCategory/").concat(t._id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(a)});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",n.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"getLocations",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/location/"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8"}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addLocation",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/location/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8"},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateLocation",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/location/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8"},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLocation",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/location/"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0eXBlIjoyLCJyZWdEYXRlIjoiV2VkIE9jdCAwMiAyMDE5IDEzOjQ1OjA3IEdNVCswMzAwIChBcmFiaWFuIFN0YW5kYXJkIFRpbWUpIiwiaXNWYWxpZCI6dHJ1ZSwiX2lkIjoiNWQ5NDgyMDNlYmQ1ZTg0M2I4NTU5NDI5IiwiZW1haWwiOiJhbGFhIiwibmFtZSI6ImFsYWEiLCJfX3YiOjAsImlhdCI6MTU3MDAxMzc2N30.LB-CBu-kOlPQwJjoyVwhuFP9lYxBWhffh-479W1emX8"},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPlace",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/place/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlaces",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/place/"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:if(!(t=e.sent).ok){e.next=9;break}return e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",t.ok);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePlace",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/place/"),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePlace",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/place/"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:this.getToken()},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkLogin",value:function(){var e=window.localStorage.getItem("token");return!!(e&&""!==e&&e.length>10)&&(console.log("am check login and returning true"),!0)}},{key:"logout",value:function(){return window.localStorage.removeItem("token")}},{key:"login",value:function(){var e=Object(P.a)(M.a.mark((function e(t){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"/login/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:if(!(a=e.sent).ok){e.next=9;break}return e.next=6,a.json();case 6:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",a.ok);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),H=a(202),Y=a.n(H),B=function(e){var t=e.items,a=e.reOrder,n=e.renderItem,o=t.map((function(e,t){return r.a.createElement("div",{"data-id":t},n(e,t))}));return r.a.createElement("div",null,r.a.createElement(Y.a,{options:{},ref:function(e){e&&e.sortable},tag:"div",onChange:function(e,n,r){var o=r.newIndex,c=r.oldIndex,l=Object(C.a)(t),i=l[c];l[c]=l[o],l[o]=i,a(l)}},o))},z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._handleImageChange=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,o,c,l;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=Array.from(t.target.files),r=new G.a,n.map((function(e){r.append("files[]",e)})),e.next=6,fetch(R.getApiUrl()+"/uploadMulti",{method:"POST",body:r,headers:{Authorization:R.getToken()}});case 6:if(!(o=e.sent).ok){e.next=22;break}return e.prev=8,e.next=11,o.json();case 11:c=e.sent,l=Object(C.a)(a.state.files),c.map((function(e){l.push(e)})),a.setState({files:l},(function(){return a.update()})),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0);case 20:e.next=23;break;case 22:console.log("response not ok ",o);case 23:case"end":return e.stop()}}),e,null,[[8,17]])})));return function(t){return e.apply(this,arguments)}}(),a.update=function(){a.props&&a.props.updateMedia&&a.props.updateMedia(a.state.files)},a.removeImageFile=function(e){var t=Object(C.a)(a.state.files);t.splice(e,1),a.setState({files:t},(function(){a.update()}))},a.addExternalLink=function(){if(""!==a.state.externalLink){var e=a.state.externalLink.toString().toLowerCase();if(!(e.includes(".mp4")||e.includes("youtube")||e.match(/\.(jpeg|jpg|gif|png)$/)))return void alert("invalid video/image url (Accepting MP4 or Youtube link");var t=e.includes(".mp4")||e.includes("youtube")?"video":"image",n=Object(C.a)(a.state.files);n.push({link:a.state.externalLink,type:t}),a.setState({externalLink:"",files:n},(function(){a.update()}))}else alert("Please fill video link first")},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.state={files:[],imageUrls:[],videoUrls:[],type:"image",externalLink:""},a._handleImageChange=a._handleImageChange.bind(Object(T.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){e.media&&(console.log("@media will rev props ",e.media),this.setState({files:e.media}))}},{key:"componentWillMount",value:function(){this.props.media&&this.setState({files:this.props.media})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Media")),r.a.createElement(W.a,{id:"controlled-tab-example",activeKey:this.state.type,onSelect:function(t){return e.setState({type:t})}},r.a.createElement(F.a,{eventKey:"image",title:"Upload"},r.a.createElement("form",null,r.a.createElement("input",{type:"file",onChange:this._handleImageChange,multiple:!0}))),r.a.createElement(F.a,{eventKey:"video",title:"External Link"},r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Add External Link"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"text",placeholder:"Video/Image Link (Youtube or external media link) MP4",onChange:function(t){return e.onChange("externalLink",t)},value:this.state.externalLink})),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addExternalLink()}},r.a.createElement("i",{className:"fa fa-plus"})," Add")))))),r.a.createElement(B,{items:this.state.files,renderItem:function(t,a){return r.a.createElement("div",null,r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},t.type.includes("video")&&!t.link.toString().toLowerCase().includes("youtube")?r.a.createElement("video",{style:{width:200,height:250,padding:5},controls:!0},r.a.createElement("source",{src:t.link,type:"video/"+t.link.substr(t.link.lastIndexOf(".")+1,t.link.length)}),"Your browser does not support HTML5 video."):t.type.includes("video")&&t.link.toString().toLowerCase().includes("youtube")&&r.a.createElement("iframe",{width:"200",height:"250",src:t.link.replace("watch?v=","embed/").split("&")[0],frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}),t.type.includes("image")&&r.a.createElement("img",{style:{width:100,height:100,padding:5},src:t.link})),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeImageFile(a)}},"Remove"))))},reOrder:function(t){e.state.files.length===t.length&&("image"===t[0].type?e.setState({files:t},(function(){e.update()})):alert("The first item must be an image"))}}))}}]),t}(n.Component),X=a(206),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).removeImageFile=function(e){var t=Object(C.a)(a.state.files),n=Object(C.a)(a.state.imageUrls);t.splice(e,1),n.splice(e,1),a.setState({files:t,imageUrls:n})},a.removeSocialMedia=function(e){var t=Object(C.a)(a.state.socialMediaList);t.splice(e,1),a.setState({socialMediaList:t},(function(){return a.props.updateSocialMediaList(a.state.socialMediaList)}))},a.videoType=function(e){console.log("video select change",e.target.value)},a.addSocialMedia=function(){if(""!==a.state.socialMediaLink){var e=Object(C.a)(a.state.socialMediaList);console.log("the linkn is ",a.state.socialMediaLink);var t={platform:a.state.selectedPlatform,link:a.state.socialMediaLink,icon:a.state.icon};e.push(t),console.log("social list before updating",e),a.setState({socialMediaList:e,socialMediaLink:"",icon:""}),a.props.updateSocialMediaList(e)}else alert("Please fill social media link first")},a.onChangePlatformSelection=function(e){a.setState({selectedPlatform:e.target.value})},a.onChangeText=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.state={files:[],imageUrls:[],videoUrls:[],type:"image",socialMediaList:a.props.socialMediaList,platforms:["facebook","instagram","linkedin","twitter","google","youtube","angellist","codepen","envelope","etsy","flickr","foursquare","github-alt","github","gitlab","medium","pinterest","quora","reddit-alien","soundcloud","stack-overflow","steam","stumbleupon","tumblr","twitch","google-plus-official","vimeo","vk","weibo","wordpress","other"],selectedPlatform:"",socialMediaLink:"",icon:""},a._handleImageChange=a._handleImageChange.bind(Object(T.a)(a)),a._handleSubmit=a._handleSubmit.bind(Object(T.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"_handleSubmit",value:function(e){e.preventDefault()}},{key:"_handleImageChange",value:function(e){e.preventDefault();var t=Array.from(e.target.files);console.log(t)}},{key:"componentWillMount",value:function(){this.setState({selectedPlatform:this.state.platforms[0]})}},{key:"componentWillReceiveProps",value:function(e,t){console.log("will rcv props",e),this.setState({socialMediaList:e.socialMediaList})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Social Media")),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Add Social Media"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(O.a,{as:"select",onChange:this.onChangePlatformSelection},this.state.platforms.map((function(e){return r.a.createElement("option",null,e)})))),"other"===this.state.selectedPlatform&&r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"text",placeholder:"Platform icon link"})),r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"text",placeholder:"Social media link",onChange:function(t){return e.onChangeText("socialMediaLink",t)},value:this.state.socialMediaLink})),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addSocialMedia()}},r.a.createElement("i",{className:"fa fa-plus"})," Add"))),0!==this.state.socialMediaList.length?this.state.socialMediaList.map((function(t,a){var n="fa fa-"+t.platform;return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("i",{className:n,style:{width:64}}),r.a.createElement(X.a,{icon:"facebook",style:{width:64}}),r.a.createElement("p",{className:"col"},t.link),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeSocialMedia(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No Social media yet"))))}}]),t}(n.Component),U=a(26),_=(a(44),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,categories:[],name:"",nameAr:"",desc:"",descAr:"",locationCategories:[],media:[],locationSocialMedia:[],selectedCategory:0,loading:!0,title:"Add",edit:!1,location:{}},a.checkProps=function(e){if(e.edit){var t=e.location;t&&a.setState({location:e.location,edit:!0,title:"Edit",name:t.name,nameAr:t.nameAr,desc:t.desc,descAr:t.descAr,locationCategories:t.categories,media:t.media,locationSocialMedia:t.socialMedia})}},a.alert=function(e){Object(U.confirmAlert)({title:""+e,message:"",buttons:[{label:"Dismiss"}]})},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.onCategoryChange=function(e){a.setState({selectedCategory:e.target.selectedIndex})},a.addCategory=function(){var e=Object(C.a)(a.state.locationCategories);e.includes(a.state.categories[a.state.selectedCategory])?alert("AddLocation already has this category"):(e.push(a.state.categories[a.state.selectedCategory]),a.setState({locationCategories:e}))},a.removeCategory=function(e){var t=Object(C.a)(a.state.locationCategories);t.splice(e,1),a.setState({locationCategories:t})},a.updateSocialMediaList=function(e){a.setState({locationSocialMedia:e})},a.updateMediaFiles=function(e){a.setState({media:e})},a.addLocation=function(){var e=[];a.state.locationCategories.map((function(t){return e.push(t._id)}));var t=a.state,n=t.name,r=t.nameAr,o=t.desc,c=t.descAr,l=t.media;t.locationSocialMedia;if(0!==e.length)if(0!==l.length&&""!==n&&""!==r&&""!==o&&""!==c)if(a.state.edit){var i=a.state.location;i.name=a.state.name,i.nameAr=a.state.nameAr,i.desc=a.state.desc,i.descAr=a.state.descAr,i.categories=e,i.media=a.state.media,i.socialMedia=a.state.locationSocialMedia,R.updateLocation(i).then((function(e){a.props&&a.props.updateLocation&&a.props.updateLocation()})).catch((function(e){return console.log(e)}))}else{var s={name:a.state.name,nameAr:a.state.nameAr,desc:a.state.desc,descAr:a.state.descAr,categories:e,media:a.state.media,socialMedia:a.state.locationSocialMedia};R.addLocation(s).catch((function(e){return console.log(e)})),a.props&&a.props.handleClose&&a.props.handleClose()}else alert("Please fill all the fields");else alert("Please add categories to the location")},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;R.getCategories().then((function(t){return e.setState({categories:t,loading:!1})})),this.checkProps(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){this.checkProps(e)}},{key:"render",value:function(){var e=this;return 0===this.state.categories.length?r.a.createElement("div",{style:{color:"red"}},"Please Add Category first",r.a.createElement(x.a,{className:"badge-info col-6",href:"/Categories"},r.a.createElement("i",{className:"fa fa-plus"})," Add Category")):r.a.createElement("div",null,r.a.createElement(w.a,{class:!0},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (English)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Location name",onChange:function(t){return e.onChange("name",t)},value:this.state.name})),r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (Arabic)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Location name (Arabic)",onChange:function(t){return e.onChange("nameAr",t)},value:this.state.nameAr}))),r.a.createElement(S.a.Group,{as:j.a,controlId:"formPlaintextPassword"},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Description (English)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{as:"textarea",placeholder:"Location Description",onChange:function(t){return e.onChange("desc",t)},value:this.state.desc})),r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Description (Arabic)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{as:"textarea",placeholder:"Location Description (Arabic)",onChange:function(t){return e.onChange("descAr",t)},value:this.state.descAr}))),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Please choose category"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(O.a,{as:"select",onChange:this.onCategoryChange},this.state.categories.map((function(e,t){return r.a.createElement("option",{key:t},e.name," / ",e.nameAr)})))),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addCategory()}},r.a.createElement("i",{className:"fa fa-plus"})," Add")))),r.a.createElement(A.a,null,0!==this.state.locationCategories.length?this.state.locationCategories.map((function(t,a){return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("img",{style:{width:64,height:64,padding:5},src:t.icon}),r.a.createElement("p",{className:"col"},t.name," / ",t.nameAr),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeCategory(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No categories yet"))),r.a.createElement(z,{media:this.state.media,updateMedia:this.updateMediaFiles}),r.a.createElement("div",{className:"p-2"}),r.a.createElement(V,{socialMediaList:this.state.locationSocialMedia,updateSocialMediaList:this.updateSocialMediaList}),r.a.createElement("div",{className:"p-2"}),r.a.createElement(Z,{showModal:this.state.modal}),r.a.createElement(x.a,{variant:"primary",onClick:function(){return e.addLocation()}},this.state.title," Location"))))}}]),t}(n.Component)),Z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1},a.handleClose=function(){return a.setState({modal:!1})},a.handleShow=function(){return a.setState({modal:!0})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({modal:e.showModal})}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal-dialog modal-lg"},r.a.createElement(L.a,{show:this.state.modal,onHide:this.handleClose},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,"Modal heading")),r.a.createElement(L.a.Body,null,"Woohoo, you're reading this text in a modal!"),r.a.createElement(L.a.Footer,null,r.a.createElement(x.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(x.a,{variant:"primary",onClick:this.handleClose},"Save Changes"))))}}]),t}(n.Component);function Q(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"Gate Of Egypt"),r.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/admin/",className:"nav-link"}," Home ")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/admin/locations",className:"nav-link"},"Locations")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/admin/categories",className:"nav-link"},"Categories")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/admin/places",className:"nav-link"},"Places")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(l.b,{to:"/Logout",className:"nav-link"},"Logout")))))}var q=a(61),K=a.n(q),$=(a(250),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._handleImageChange=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,o,c;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=t.target.files)[0].type.toString().includes("image")){e.next=5;break}return alert("allowed type (Images) ONLY"),e.abrupt("return");case 5:return a.setState({files:[]}),(r=new G.a).append("file",n[0]),e.next=10,fetch(R.getApiUrl()+"/upload",{method:"POST",body:r,headers:{Authorization:R.getToken()}});case 10:if(!(o=e.sent).ok){e.next=25;break}return e.prev=12,e.next=15,o.json();case 15:c=e.sent,a.setState({files:c.link}),a.props.updateMedia(c.link),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(12),console.log(e.t0);case 23:e.next=26;break;case 25:console.log("response not ok ",o);case 26:case"end":return e.stop()}}),e,null,[[12,20]])})));return function(t){return e.apply(this,arguments)}}(),a.removeImageFile=function(){a.setState({files:""}),a.props.updateMedia("")},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.state={files:""},a._handleImageChange=a._handleImageChange.bind(Object(T.a)(a)),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.props.icon&&this.setState({files:this.props.icon})}},{key:"componentWillReceiveProps",value:function(e,t){e.icon&&this.setState({files:e.icon})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("div",{className:"row p-2"},r.a.createElement("input",{type:"file",onChange:this._handleImageChange,className:"col"}))),""!==this.state.files&&r.a.createElement("div",null,r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("img",{style:{width:100,height:100,padding:5},src:this.state.files})),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeImageFile()}},"Remove")))))}}]),t}(n.Component)),ee=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.setState({modal:!1}),a.props.handleClose&&a.props.handleClose()},a.state={name:"",nameAr:"",icon:"",modal:!1,edit:!1,title:"Add",subCategory:{}},a.addMediaFile=function(e){a.setState({icon:e}),console.log(e)},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.addSubCategory=function(){if(""!==a.state.name&&""!==a.state.nameAr&&""!==a.state.icon){if(a.state.edit){var e=a.state.subCategory;e.name=a.state.name,e.nameAr=a.state.nameAr,e.icon=a.state.icon,a.props.editSubCategory(e)}else a.props.addSubCategory({name:a.state.name,nameAr:a.state.nameAr,icon:a.state.icon});a.setState({name:"",nameAr:"",icon:"",edit:!1,title:"Add",subCategory:{}}),a.handleClose()}else alert("please fill all fields")},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){if(this.state.modal!==e.modal&&this.setState({modal:e.modal}),e.edit&&e.category){var a=e.category.subCategories[e.subCategoryIndex];a&&this.setState({subCategory:a,edit:!0,title:"Edit",name:a.name,nameAr:a.nameAr,icon:a.icon})}}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{class:!0},r.a.createElement(L.a,{show:this.state.modal,onHide:this.handleClose,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,this.state.title," SubCategory")),r.a.createElement(L.a.Body,null,r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (English)"),r.a.createElement(I.a,null,r.a.createElement(S.a.Control,{type:"text",placeholder:"Category name",value:this.state.name,onChange:function(t){return e.onChange("name",t)}}))),r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (Arabic)"),r.a.createElement(I.a,null,r.a.createElement(S.a.Control,{type:"text",placeholder:"Category name (Arabic)",value:this.state.nameAr,onChange:function(t){return e.onChange("nameAr",t)}}))),r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"SubCategory Icon"),r.a.createElement($,{updateMedia:this.addMediaFile,icon:this.state.icon})))),r.a.createElement(L.a.Footer,null,r.a.createElement(x.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),r.a.createElement(x.a,{variant:"primary",onClick:function(){e.addSubCategory()}},"Save Changes"))))}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={subCategories:[],category:{},name:"",nameAr:"",icon:"",modal:!1,subCategoryModal:!1,edit:!1,title:"Add"},a.handleClose=function(){a.setState({modal:!1,subCategoryModal:!1}),a.props.handleClose()},a.addSubCategory=function(e){var t=Object(C.a)(a.state.subCategories);t.push(e),a.setState({subCategories:t,subCategoryModal:!1})},a.addMediaFile=function(e){a.setState({icon:e})},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.addCategory=function(){if(""!==a.state.name&&""!==a.state.nameAr&&""!==a.state.icon&&0!==a.state.subCategories.length){if(a.state.edit){var e=a.state.category;e.name=a.state.name,e.nameAr=a.state.nameAr,e.icon=a.state.icon,e.subCategories=a.state.subCategories,a.props.editCategory(e).catch((function(e){return console.log(e)}))}else a.props.addCategory({name:a.state.name,nameAr:a.state.nameAr,icon:a.state.icon,subCategories:a.state.subCategories});a.setState({name:"",nameAr:"",icon:"",subCategories:[],edit:!1,title:"Add"}),a.handleClose()}else alert("please fill all fields")},a.removeSubCategory=function(e){var t=Object(C.a)(a.state.subCategories);t.splice(e,1),a.setState({subCategories:t})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){if(this.state.modal!==e.modal&&this.setState({modal:e.modal}),e.edit){var a=e.category;a&&this.setState({category:e.category,title:"Edit",edit:!0,name:a.name,nameAr:a.nameAr,icon:a.icon,subCategories:a.subCategories})}}},{key:"render",value:function(){var e=this;return r.a.createElement(w.a,{class:!0},r.a.createElement(L.a,{show:this.state.modal,onHide:this.handleClose,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,this.state.title," Category")),r.a.createElement(L.a.Body,null,r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (English)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Category name",value:this.state.name,onChange:function(t){return e.onChange("name",t)}})),r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (Arabic)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Category name (Arabic)",value:this.state.nameAr,onChange:function(t){return e.onChange("nameAr",t)}}))),r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Category Icon"),r.a.createElement(I.a,null,r.a.createElement($,{updateMedia:this.addMediaFile,icon:this.state.icon}))),r.a.createElement(S.a.Group,{as:j.a,className:"col"},r.a.createElement(x.a,{className:"badge-info col",onClick:function(){return e.setState({subCategoryModal:!0})}},r.a.createElement("i",{className:"fa fa-plus"})," Add SubCategory")),r.a.createElement(A.a,null,0!==this.state.subCategories.length?this.state.subCategories.map((function(t,a){return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("img",{style:{width:64,height:64,padding:5},src:t.icon}),r.a.createElement("p",{className:"col"},t.name," / ",t.nameAr),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeSubCategory(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No Subcategories yet"))),r.a.createElement(ee,{modal:this.state.subCategoryModal,handleClose:function(){return e.setState({subCategoryModal:!1})},addSubCategory:this.addSubCategory}))),r.a.createElement(L.a.Footer,null,r.a.createElement(x.a,{variant:"secondary",onClick:this.handleClose},"Cancel"),r.a.createElement(x.a,{variant:"primary",onClick:function(){e.addCategory()}},"Save Changes"))))}}]),t}(n.Component),ae=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={categories:[],loading:!0,categoriesModal:!1,subCategoriesModal:!1,categoryIndex:-1,subCategoryIndex:-1,edit:!1},a.fetchCategories=function(){R.getCategories().then((function(e){return a.setState({categories:e,loading:!1})})).catch((function(e){return console.log(e)}))},a.confirmAlert=function(e,t){Object(U.confirmAlert)({title:""+e,message:"Are you sure to do this.",buttons:[{label:"Yes",onClick:function(){t&&t()}},{label:"No",onClick:function(){a.alert("hhey no! ")}}]})},a.alert=function(e){Object(U.confirmAlert)({title:""+e,message:"",buttons:[{label:"Dismiss"}]})},a.removeCategory=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this category?")){e.next=5;break}return e.next=3,R.deleteCategory(a.state.categories[t]);case 3:e.sent?a.fetchCategories():a.alert("Failed to delete category");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeSubCategory=function(){var e=Object(P.a)(M.a.mark((function e(t,n){var r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this subcategory?")){e.next=10;break}if(r=Object(C.a)(a.state.categories),1!==(o=r[t]).subCategories.length){e.next=6;break}return alert("CanNOT delete, Category Must have at least 1 SubCategory"),e.abrupt("return");case 6:return e.next=8,R.deleteSubCategory(o,o.subCategories[n]);case 8:e.sent?a.fetchCategories():a.alert("Failed to delete subcategory");case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.addCategory=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.addCategory(t);case 2:(n=e.sent)?(console.log(n),(r=Object(C.a)(a.state.categories)).push(n),a.setState({categories:r,categoriesModal:!1})):a.alert("failed to add category");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.addSubCategory=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(C.a)(a.state.categories),-1===a.state.categoryIndex){e.next=9;break}return r=n[a.state.categoryIndex],e.next=5,R.addSubCategory(r,t);case 5:(o=e.sent)&&o.name?(a.setState({categoryIndex:-1}),a.fetchCategories()):a.alert("fail to add subCategory"),e.next=10;break;case 9:a.alert("Failed to add sub category");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editCategory=function(){var e=Object(P.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.updateCategory(t);case 2:(n=e.sent)&&n.name?a.fetchCategories():a.alert("Failed to update category");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editSubCategory=function(){var e=Object(P.a)(M.a.mark((function e(t){var n,r,o;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(C.a)(a.state.categories),-1===a.state.categoryIndex||-1===a.state.subCategoryIndex){e.next=10;break}return r=n[a.state.categoryIndex],e.next=5,R.updateSubCategory(r,t);case 5:(o=e.sent)&&o.name?a.fetchCategories():a.alert("Failed to update subcategory"),a.setState({categoryIndex:-1,subCategoryIndex:-1}),e.next=11;break;case 10:a.alert("Failed to update sub category");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;console.log("categories will mount"),R.getCategories().then((function(t){return e.setState({categories:t,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Categories"),r.a.createElement(S.a,null,r.a.createElement(x.a,{variant:"success",onClick:function(){return e.setState({categoriesModal:!0})}},r.a.createElement("i",{className:"fa fa-plus"})," Add Category"),r.a.createElement(K.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Icon"),r.a.createElement("th",null,"Category Name"),r.a.createElement("th",null,"Category Name (Ar)"),r.a.createElement("th",null,"SubCategories"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.state.categories.length>0?this.state.categories.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,r.a.createElement("center",null,r.a.createElement("img",{style:{width:64,height:64,padding:5},src:t.icon}))),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.nameAr),r.a.createElement("td",null,r.a.createElement(x.a,{variant:"success",onClick:function(){return e.setState({categoryIndex:a,subCategoriesModal:!0})}},r.a.createElement("i",{className:"fa fa-plus"})," Add SubCategory"),r.a.createElement(K.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Icon"),r.a.createElement("th",null,"Category Name"),r.a.createElement("th",null,"Category Name (Ar)"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,t.subCategories.length>0?t.subCategories.map((function(t,n){return r.a.createElement("tr",null,r.a.createElement("td",null,n),r.a.createElement("td",null,r.a.createElement("center",null,r.a.createElement("img",{style:{width:64,height:64,padding:5},src:t.icon}))),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.nameAr),r.a.createElement("td",{className:"row"},r.a.createElement("i",{className:"fa fa-trash fa-2x",style:{color:"red"},onClick:function(){return e.removeSubCategory(a,n)}}),r.a.createElement("i",{className:"fa fa-edit fa-2x",style:{color:"green"},onClick:function(){return e.setState({categoryIndex:a,subCategoryIndex:n,edit:!0,subCategoriesModal:!0})}})))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},r.a.createElement("center",null,"No subcategories yet")))))),r.a.createElement("td",{className:"row"},r.a.createElement("i",{className:"fa fa-trash fa-2x",style:{color:"red"},onClick:function(){return e.removeCategory(a)}}),r.a.createElement("i",{className:"fa fa-edit fa-2x",style:{color:"green"},onClick:function(){return e.setState({categoryIndex:a,edit:!0,categoriesModal:!0})}})))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"6"},r.a.createElement("center",null,"No categories yet")))))),r.a.createElement(te,{modal:this.state.categoriesModal,handleClose:function(){return e.setState({categoriesModal:!1,categoryIndex:-1,edit:!1})},addCategory:this.addCategory,edit:this.state.edit,editCategory:this.editCategory,category:this.state.categories[this.state.categoryIndex]}),r.a.createElement(ee,{modal:this.state.subCategoriesModal,handleClose:function(){return e.setState({subCategoriesModal:!1,categoryIndex:-1,edit:!1})},addSubCategory:this.addSubCategory,edit:this.state.edit,editSubCategory:this.editSubCategory,category:this.state.categories[this.state.categoryIndex],subCategoryIndex:this.state.subCategoryIndex}))}}]),t}(n.Component),ne=a(456),re=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={locations:[],loading:!0,modal:!1,index:-1,edit:!1},a.fetchLocations=function(){R.getLocations().then((function(e){a.setState({locations:e,loading:!1})})).catch((function(e){return console.log(e)}))},a.alert=function(e){Object(U.confirmAlert)({title:""+e,message:"",buttons:[{label:"Dismiss"}]})},a.addLocation=function(){},a.removeLocation=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this location?")){e.next=5;break}return e.next=3,R.deleteLocation(t);case 3:e.sent?a.fetchLocations():a.alert("failed to delete the location");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.fetchLocations()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Locations"),r.a.createElement(x.a,{variant:"success",onClick:function(){return e.setState({modal:!0})}},r.a.createElement("i",{className:"fa fa-plus"})," Add Location"),r.a.createElement(ne.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Name Ar"),r.a.createElement("th",null,"Desc"),r.a.createElement("th",null,"Desc Ar"),r.a.createElement("th",null,"Social Media"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.state.locations.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.nameAr),r.a.createElement("td",null,t.desc),r.a.createElement("td",null,t.descAr),r.a.createElement("td",null,t.socialMedia.map((function(e){return r.a.createElement("div",null,e.link)}))),r.a.createElement("td",null,r.a.createElement("i",{className:"fa fa-trash fa-2x",style:{color:"red"},onClick:function(){return e.removeLocation(t)}}),r.a.createElement("i",{className:"fa fa-edit fa-2x",style:{color:"green"},onClick:function(){return e.setState({index:a,edit:!0,modal:!0})}})))})))),r.a.createElement(oe,{modal:this.state.modal,location:this.state.locations[this.state.index],edit:this.state.edit,updateLocation:function(){e.fetchLocations(),e.setState({modal:!1,edit:!1,index:-1})},handleClose:function(){e.fetchLocations(),e.setState({modal:!1})}}))}}]),t}(n.Component),oe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,edit:!1,location:{},title:"Add"},a.handleClose=function(){a.setState({modal:!1}),a.props&&a.props.updateLocation?a.props.updateLocation():a.props.handleClose()},a.handleShow=function(){return a.setState({modal:!0})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({modal:e.modal,edit:e.edit,title:"Add"}),e.edit&&e.location&&this.setState({title:"Edit",edit:!0,location:e.location})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{show:this.state.modal,onHide:this.handleClose,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,this.state.title," Location")),r.a.createElement(L.a.Body,null,r.a.createElement(_,{edit:this.state.edit,location:this.state.location,updateLocation:this.props.updateLocation,handleClose:this.handleClose}))))}}]),t}(n.Component),ce=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={subscribeChecker:!1,socialMediaChecker:!1,videoChecker:!1,offerChecker:!1,imageNum:0,videoNum:0,customPanoramaChecker:!1,priorityABChecker:!1,selectedPeriodIndex:0,subscriptionDate:(new Date).toISOString().substr(0,10),custom360Link:"",offerLink:""},a.checkProps=function(e){e&&e.subscriptionInfo&&e.subscriptionInfo.subscriptionDate&&(a.state=e.subscriptionInfo)},a.update=function(){a.props.update(a.state)},a.onCheckerChange=function(e,t){a.setState(Object(k.a)({},e,t.target.checked),(function(){return a.update()}))},a.onPeriodChange=function(e){a.setState({selectedPeriodIndex:e.target.selectedIndex},(function(){return a.update()}))},a.updatePanorama=function(e){a.setState({custom360Link:e},(function(){return a.update()}))},a.updateOfferLink=function(e){a.setState({offerLink:e},(function(){return a.update()}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.checkProps(this.props)}},{key:"componentWillReceiveProps",value:function(e,t){this.checkProps(e)}},{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",null,"Subscription Control")),r.a.createElement(S.a,null,r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.priorityABChecker,onClick:function(t){return e.onCheckerChange("priorityABChecker",t)},custom:!0,type:"checkbox",label:"Priority (Top Alpha.bet.)",id:"priority"}))),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.subscribeChecker,onClick:function(t){return e.onCheckerChange("subscribeChecker",t)},custom:!0,type:"checkbox",label:"Subscribed",id:"subscription"}))),this.state.subscribeChecker&&r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Label,null,"Validity"),r.a.createElement(S.a.Control,{type:"date",value:this.state.subscriptionDate,onChange:function(t){return e.setState({subscriptionDate:t.target.value},(function(){return e.update()}))},placeholder:"Subscriptoin date"})),r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Label,null,"Validity"),r.a.createElement(O.a,{as:"select",onChange:this.onPeriodChange},r.a.createElement("option",{key:0},"Year"),r.a.createElement("option",{key:1},"Month")))),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.socialMediaChecker,onClick:function(t){return e.onCheckerChange("socialMediaChecker",t)},custom:!0,type:"checkbox",label:"Social Media",id:"socialMedia"}))),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.videoChecker,onClick:function(t){return e.onCheckerChange("videoChecker",t)},custom:!0,id:"video",type:"checkbox",label:"Video"}))),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.customPanoramaChecker,onClick:function(t){return e.onCheckerChange("customPanoramaChecker",t)},custom:!0,id:"360",type:"checkbox",label:"Custom 360"}))),this.state.customPanoramaChecker&&r.a.createElement($,{updateMedia:this.updatePanorama,icon:this.state.custom360Link}),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Check,{checked:this.state.offerChecker,onClick:function(t){return e.onCheckerChange("offerChecker",t)},custom:!0,id:"offer",type:"checkbox",label:"has offer"}))),this.state.offerChecker&&r.a.createElement($,{updateMedia:this.updateOfferLink,icon:this.state.offerLink})))}}]),t}(n.Component),le=a(210),ie=a(211),se=a.n(ie),ue=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={address:"New Cairo",position:{lat:30.017792,lng:31.3473752}},a.checkProps=function(e){if(e&&e.location){var t=e.location;t.longitude&&a.setState({address:t.address,position:{lat:t.latitude,lng:t.longitude}})}},a.update=function(){a.props&&a.props.update&&a.props.update(a.state.position,a.state.address)},a.handleLocationChange=function(e){var t=e.position,n=e.address;e.places;a.setState({position:t,address:n},(function(){return a.update()}))},a.onSuggestSelect=function(e){e&&e.label&&a.setState({position:e.location,address:e.label},(function(){return a.update()}))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.checkProps(e)}},{key:"componentWillMount",value:function(){this.checkProps(this.props)}},{key:"componentDidMount",value:function(){this.update()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h4",null,this.state.address),r.a.createElement("div",null,r.a.createElement(le.a,{style:{width:"100%",height:"40px",paddingLeft:"16px",marginTop:"2px",marginBottom:"100px"},ref:function(t){return e._geoSuggest=t},country:"EG",onSuggestSelect:this.onSuggestSelect}),r.a.createElement(se.a,{containerElement:r.a.createElement("div",{style:{height:"100%"}}),mapElement:r.a.createElement("div",{style:{height:"400px"}}),defaultPosition:{lat:this.state.position.lat,lng:this.state.position.lng},onChange:this.handleLocationChange,radius:1,zoom:15})))}}]),t}(n.Component),de=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,categories:[],name:"",nameAr:"",desc:"",descAr:"",media:[],loading:!0,title:"Add",edit:!1,locations:[],selectedLocationIndex:0,selectedCategoryIndex:0,selectedSubCategoryIndex:0,phones:[],emails:[],workingHours:[],website:"",phone:"",email:"",workingHourFrom:"",workingHourTo:"",subscriptionInfo:{},place:{},socialMedia:[],mapLocation:{}},a.fetchData=Object(P.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getCategories();case 2:return t=e.sent,e.next=5,R.getLocations();case 5:n=e.sent,a.setState({categories:t,locations:n,loading:!1}),a.checkProps(a.props);case 8:case"end":return e.stop()}}),e)}))),a.updateSubscriptionInfo=function(e){a.setState({subscriptionInfo:e})},a.checkProps=function(e){if(e.edit){var t=e.place;if(t){var n=0,r=0,o=0;try{n=a.state.locations.findIndex((function(e){return e._id===t.location._id})),r=a.state.locations[n].categories.findIndex((function(e){return e._id===t.category._id})),o=a.state.locations[n].categories[r].subCategories.findIndex((function(e){return e._id===t.subCategory}))}catch(c){console.log("Error while fetching the indexes")}console.log("selected locInd",n,"\nSelected catInd",r,"\n selectedSubIn",o),a.setState({place:e.place,edit:!0,title:"Edit",name:t.name,nameAr:t.nameAr,desc:t.desc,descAr:t.descAr,media:t.media,phones:t.phone,emails:t.email,workingHours:t.workingHours,website:t.website,subscriptionInfo:t.subscriptionInfo,socialMedia:t.socialMedia,mapLocation:t.mapLocation,selectedLocationIndex:-1!==n?n:0,selectedCategoryIndex:-1!==r?r:0,selectedSubCategoryIndex:-1!==o?o:0})}}},a.alert=function(e){Object(U.confirmAlert)({title:""+e,message:"",buttons:[{label:"Dismiss"}]})},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a.onLocationChange=function(e){a.setState({selectedLocationIndex:e.target.selectedIndex,selectedCategoryIndex:0,selectedSubCategoryIndex:0})},a.onCategoryChange=function(e){a.setState({selectedCategoryIndex:e.target.selectedIndex})},a.onSubCategoryChange=function(e){a.setState({selectedSubCategoryIndex:e.target.selectedIndex})},a.addCategory=function(){var e=Object(C.a)(a.state.locationCategories);e.includes(a.state.categories[a.state.selectedCategory])?alert("AddLocation already has this category"):(e.push(a.state.categories[a.state.selectedCategory]),a.setState({locationCategories:e}))},a.updateSocialMediaList=function(e){a.setState({socialMedia:e})},a.updateMediaFiles=function(e){console.log("updating media to ",e),a.setState({media:e})},a.addPhone=function(){var e=Object(C.a)(a.state.phones);e.push(a.state.phone),a.setState({phones:e,phone:""})},a.removePhone=function(e){var t=Object(C.a)(a.state.phones);t.splice(e,1),a.setState({phones:t})},a.addEmail=function(){var e=Object(C.a)(a.state.emails);e.push(a.state.email),a.setState({emails:e,email:""})},a.removeEmail=function(e){var t=Object(C.a)(a.state.emails);t.splice(e,1),a.setState({emails:t})},a.timeFormat=function(e){var t,a,n=e.split(":");return(t=n[0])>12?(a="PM",t-=12):t<12?(a="AM",0===t&&(t=12)):a="PM",t+":"+n[1]+" "+a},a.addWorkingHour=function(){var e=a.state.workingHourFrom,t=a.state.workingHourTo;if(e&&t){var n=Object(C.a)(a.state.workingHours),r=a.timeFormat(e)+" To "+a.timeFormat(t);n.push(r),a.setState({workingHours:n,workingHourFrom:"",workingHourTo:""})}else alert("Please choose correct time")},a.removeWorkingHour=function(e){var t=Object(C.a)(a.state.workingHours);t.splice(e,1),a.setState({workingHours:t})},a.updateMap=function(e,t){var n={longitude:e.lng,latitude:e.lat,address:t};a.setState({mapLocation:n})},a.validation=function(e){console.log("validating ",e);var t=!0;return e&&(""!==e.name&&""!==e.nameAr&&""!==e.desc&&""!==e.descAr&&""!==e.category&&""!==e.subCategory&&""!==e.location&&e.mapLocation!=={}&&e.subscriptionInfo!=={}||(t=!1)),t},a.addPlace=function(){var e,t=a.state.locations[a.state.selectedLocationIndex],n=t.categories[a.state.selectedCategoryIndex]._id,r=t.categories[a.state.selectedCategoryIndex].subCategories[a.state.selectedSubCategoryIndex]._id;console.log("Iam selecting category id ",n),console.log("Iam selecting Subcategory id ",r),a.state.edit?((e=a.state.place).name=a.state.name,e.nameAr=a.state.nameAr,e.desc=a.state.desc,e.descAr=a.state.descAr,e.media=a.state.media,e.category=n,e.subCategory=r,e.phone=a.state.phones,e.email=a.state.emails,e.workingHours=a.state.workingHours,e.website=a.state.website,e.location=t._id,e.mapLocation=a.state.mapLocation,e.socialMedia=a.state.socialMedia,e.subscriptionInfo=a.state.subscriptionInfo,a.validation(e)?(R.updatePlace(e).catch((function(e){return console.log(e)})),a.props&&a.props.updatePlace&&a.props.updatePlace()):alert("Please fill all fields")):(e={name:a.state.name,nameAr:a.state.nameAr,desc:a.state.desc,descAr:a.state.descAr,media:a.state.media,category:n,subCategory:r,phone:a.state.phones,email:a.state.emails,workingHours:a.state.workingHours,website:a.state.website,location:t._id,mapLocation:a.state.mapLocation,socialMedia:a.state.socialMedia,subscriptionInfo:a.state.subscriptionInfo},a.validation(e)?R.addPlace(e).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)})):alert("Please fill all fields")),a.props&&a.props.handleClose&&a.validation(e)&&a.props.handleClose()},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.fetchData()}},{key:"componentWillReceiveProps",value:function(e,t){this.checkProps(e)}},{key:"render",value:function(){var e=this;return 0===this.state.categories.length?r.a.createElement("div",{style:{color:"red"}},"Please Add Location first",r.a.createElement(x.a,{className:"badge-info col-6",href:"/Categories"},r.a.createElement("i",{className:"fa fa-plus"})," Add Category")):r.a.createElement("div",null,r.a.createElement(w.a,{class:!0},!this.props.handleClose&&r.a.createElement("h2",null," Add Place"),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{as:j.a},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (English)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Place name",onChange:function(t){return e.onChange("name",t)},value:this.state.name})),r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Name (Arabic)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{type:"text",placeholder:"Place name (Arabic)",onChange:function(t){return e.onChange("nameAr",t)},value:this.state.nameAr}))),r.a.createElement(S.a.Group,{as:j.a,controlId:"formPlaintextPassword"},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Description (English)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{as:"textarea",placeholder:"Place Description",onChange:function(t){return e.onChange("desc",t)},value:this.state.desc})),r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Description (Arabic)"),r.a.createElement(I.a,{sm:"4"},r.a.createElement(S.a.Control,{as:"textarea",placeholder:"Place Description (Arabic)",onChange:function(t){return e.onChange("descAr",t)},value:this.state.descAr}))),r.a.createElement(S.a.Group,{as:j.a,controlId:"formPlaintextPassword"},r.a.createElement(S.a.Label,{column:!0,sm:"2"},"Website"),r.a.createElement(I.a,null,r.a.createElement(S.a.Control,{type:"text",placeholder:"Website",onChange:function(t){return e.onChange("website",t)},value:this.state.website}))),r.a.createElement(S.a,null,r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Label,null,"Please choose location"),r.a.createElement(O.a,{as:"select",onChange:this.onLocationChange,value:this.state.selectedLocationIndex},this.state.locations.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name," / ",e.nameAr)})))),r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Label,null,"Please choose Category"),r.a.createElement(O.a,{as:"select",onChange:this.onCategoryChange,value:this.state.selectedCategoryIndex},this.state.locations[this.state.selectedLocationIndex]&&this.state.locations[this.state.selectedLocationIndex].categories.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name," / ",e.nameAr)})))),r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Label,null,"Choose SubCategory"),r.a.createElement(O.a,{as:"select",onChange:this.onSubCategoryChange,value:this.state.selectedSubCategoryIndex},this.state.locations[this.state.selectedLocationIndex]&&this.state.locations[this.state.selectedLocationIndex].categories[this.state.selectedCategoryIndex]&&this.state.locations[this.state.selectedLocationIndex].categories[this.state.selectedCategoryIndex].subCategories.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.name," / ",e.nameAr)}))))))),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Please Add phone"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"text",placeholder:"Phone Number",onChange:function(t){return e.onChange("phone",t)},value:this.state.phone})),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addPhone()}},r.a.createElement("i",{className:"fa fa-plus"})," Add"))),0!==this.state.phones.length?this.state.phones.map((function(t,a){return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col"},t),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removePhone(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No Phones added yet"))),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Please Add Email"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"text",placeholder:"Email",onChange:function(t){return e.onChange("email",t)},value:this.state.email})),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addEmail()}},r.a.createElement("i",{className:"fa fa-plus"})," Add"))),0!==this.state.emails.length?this.state.emails.map((function(t,a){return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col"},t),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeEmail(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No Emails added yet"))),r.a.createElement(S.a.Group,null,r.a.createElement(S.a.Label,null,"Please Working Hours"),r.a.createElement(S.a.Row,null,r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"time",placeholder:"Working Hours From",onChange:function(t){return e.onChange("workingHourFrom",t)},value:this.state.workingHourFrom})),r.a.createElement("p",null,"To"),r.a.createElement(S.a.Group,{as:I.a},r.a.createElement(S.a.Control,{type:"time",placeholder:"Working Hours To",onChange:function(t){return e.onChange("workingHourTo",t)},value:this.state.workingHourTo})),r.a.createElement(S.a.Group,{as:I.a,className:"center"},r.a.createElement(x.a,{className:"badge-info col-6",onClick:function(){return e.addWorkingHour()}},r.a.createElement("i",{className:"fa fa-plus"})," Add"))),0!==this.state.workingHours.length?this.state.workingHours.map((function(t,a){return r.a.createElement(A.a.Item,null,r.a.createElement("div",{className:"row"},r.a.createElement("p",{className:"col"},t),r.a.createElement(x.a,{variant:"danger",onClick:function(){return e.removeWorkingHour(a)}},"Remove")))})):r.a.createElement(A.a.Item,null,r.a.createElement("p",{className:"col"},"No Working Hours added yet"))),r.a.createElement(z,{media:this.state.media,updateMedia:this.updateMediaFiles}),r.a.createElement("div",{className:"p-2"}),r.a.createElement(V,{socialMediaList:this.state.socialMedia,updateSocialMediaList:this.updateSocialMediaList}),r.a.createElement(ce,{update:this.updateSubscriptionInfo,subscriptionInfo:this.state.subscriptionInfo}),r.a.createElement("div",{className:"p-2"}),r.a.createElement(ue,{update:this.updateMap,location:this.state.mapLocation}),r.a.createElement("div",{className:"p-2"}),r.a.createElement(x.a,{variant:"primary",onClick:function(){return e.addPlace()}},this.state.title," Place"))))}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={places:[],loading:!0,modal:!1,index:-1,edit:!1},a.fetchPlaces=function(){R.getPlaces().then((function(e){a.setState({places:e,loading:!1})})).catch((function(e){return console.log(e)}))},a.addLocation=function(){},a.alert=function(e){Object(U.confirmAlert)({title:""+e,message:"",buttons:[{label:"Dismiss"}]})},a.removePlace=function(){var e=Object(P.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this place?")){e.next=5;break}return e.next=3,R.deletePlace(t);case 3:e.sent?a.fetchPlaces():a.alert("failed to delete the place");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.fetchPlaces()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h2",null,"Places/Companies"),r.a.createElement(x.a,{variant:"success",onClick:function(){return e.setState({modal:!0})}},r.a.createElement("i",{className:"fa fa-plus"})," Add Place"),r.a.createElement(ne.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Name Ar"),r.a.createElement("th",null,"Desc"),r.a.createElement("th",null,"Desc Ar"),r.a.createElement("th",null,"Social Media"),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,this.state.places.map((function(t,a){return r.a.createElement("tr",null,r.a.createElement("td",null,a),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.nameAr),r.a.createElement("td",null,t.desc),r.a.createElement("td",null,t.descAr),r.a.createElement("td",null,t.socialMedia&&t.socialMedia.map((function(e){return r.a.createElement("div",null,e.link)}))),r.a.createElement("td",null,r.a.createElement("i",{className:"fa fa-trash fa-2x",style:{color:"red"},onClick:function(){return e.removePlace(t)}}),r.a.createElement("i",{className:"fa fa-edit fa-2x",style:{color:"green"},onClick:function(){return e.setState({index:a,edit:!0,modal:!0})}})))})))),r.a.createElement(pe,{modal:this.state.modal,place:this.state.places[this.state.index],edit:this.state.edit,updatePlace:function(){e.fetchPlaces(),e.setState({modal:!1,edit:!1,index:-1})},handleClose:function(){e.fetchPlaces(),e.setState({modal:!1})}}))}}]),t}(n.Component),pe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,edit:!1,place:{},title:"Add"},a.handleClose=function(){a.setState({modal:!1}),a.props&&a.props.updatePlace?a.props.updatePlace():a.props.handleClose()},a.handleShow=function(){return a.setState({modal:!0})},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){this.setState({modal:e.modal,edit:e.edit,title:"Add"}),e.edit&&e.place&&this.setState({title:"Edit",edit:!0,place:e.place})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{show:this.state.modal,onHide:this.handleClose,size:"lg"},r.a.createElement(L.a.Header,{closeButton:!0},r.a.createElement(L.a.Title,null,this.state.title," Place")),r.a.createElement(L.a.Body,null,r.a.createElement(de,{edit:this.state.edit,place:this.state.place,updatePlace:this.props.updatePlace,handleClose:this.handleClose}))))}}]),t}(n.Component),he=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",error:""},a.dismissError=function(){a.setState({error:""})},a.handleSubmit=function(e){return e.preventDefault(),a.state.email&&""!==a.state.email?a.state.password&&""!==a.state.password?void R.login({email:a.state.email,password:a.state.password}).then((function(e){e.token?(window.localStorage.setItem("token",e.token),a.props.history.push("/admin")):alert("Login Failed please try again")})).catch((function(e){console.log(e)})):alert("Password is required"):alert("Email is required")},a.onChange=function(e,t){a.setState(Object(k.a)({},e,t.target.value))},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return R.checkLogin()&&(console.log("@login yes iam logged in "),this.props.history.push("/admin")),r.a.createElement("div",{className:"Login"},r.a.createElement(S.a,null,r.a.createElement(S.a.Group,{controlId:"formBasicEmail"},r.a.createElement(S.a.Label,null,"Email address"),r.a.createElement(S.a.Control,{type:"email",placeholder:"Enter email",value:this.state.email,onChange:function(t){return e.onChange("email",t)}})),r.a.createElement(S.a.Group,{controlId:"formBasicPassword"},r.a.createElement(S.a.Label,null,"Password"),r.a.createElement(S.a.Control,{type:"password",placeholder:"Password",value:this.state.password,onChange:function(t){return e.onChange("password",t)}})),r.a.createElement(x.a,{variant:"primary",type:"submit",onClick:function(t){return e.handleSubmit(t)}},"Login")))}}]),t}(n.Component);Array.prototype.unique=function(){return this.filter((function(e,t,a){return a.indexOf(e)===t}))};var fe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={visitors:[],loading:!0},a.getUniqueVisitors=function(){return a.state.visitors.length>0?a.state.visitors.map((function(e){return e.deviceId})).unique().length:0},a.getVisitors=function(e){return a.state.visitors.length>0?a.state.visitors.filter((function(t){return t.platform===e})).length:0},a}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){var e=this;R.getVisitors().then((function(t){console.log(t),e.setState({visitors:t,loading:!1})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Visitors"),r.a.createElement(S.a,null,r.a.createElement("p",null,"Number of total visitors# ",this.state.visitors.length),r.a.createElement("p",null,"Number of Unique visitors# ",this.getUniqueVisitors()),r.a.createElement("p",null,"Number of IOS visitors# ",this.getVisitors("ios")),r.a.createElement("p",null,"Number of Android visitors# ",this.getVisitors("android")),r.a.createElement(K.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Carrier"),r.a.createElement("th",null,"DeviceId"),r.a.createElement("th",null,"Platform"),r.a.createElement("th",null,"ipAddress"),r.a.createElement("th",null,"uniqueId"),r.a.createElement("th",null,"isTablet"),r.a.createElement("th",null,"landscape"))),r.a.createElement("tbody",null,this.state.visitors.length>0?this.state.visitors.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,e.carrier),r.a.createElement("td",null,e.deviceId),r.a.createElement("td",null,e.platform),r.a.createElement("td",null,e.ipAddress),r.a.createElement("td",null,e.uniqueId),r.a.createElement("td",null,e.isTablet?"YES":"NO"),r.a.createElement("td",null,e.landscape?"YES":"NO"))})):r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"8"},r.a.createElement("center",null,"No Visitors yet")))))))}}]),t}(n.Component);var ge=function(e){for(var t=e.component,a=arguments.length,n=new Array(a>1?a-1:0),o=1;o<a;o++)n[o-1]=arguments[o];return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return R.checkLogin()?r.a.createElement("div",null,r.a.createElement(Q,null)," ",r.a.createElement(t,e)):r.a.createElement(i.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ee=Object(i.g)((function(e){var t=e.history;return R.logout(),t.push("/login"),null})),be=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:h}),r.a.createElement(ge,{exact:!0,path:"/admin/",component:h}),r.a.createElement(ge,{exact:!0,path:"/admin/addLocation",component:_}),r.a.createElement(ge,{exact:!0,path:"/admin/categories",component:ae}),r.a.createElement(ge,{exact:!0,path:"/admin/about",component:v}),r.a.createElement(ge,{exact:!0,path:"/admin/addCategory",component:te}),r.a.createElement(ge,{exact:!0,path:"/admin/Locations",component:re}),r.a.createElement(ge,{exact:!0,path:"/admin/Places",component:me}),r.a.createElement(ge,{exact:!0,path:"/admin/addPlace",component:de}),r.a.createElement(ge,{exact:!0,path:"/admin/MapView",component:ue}),r.a.createElement(ge,{exact:!0,path:"/admin/visitors",component:fe}),r.a.createElement(i.b,{exact:!0,path:"/Logout",component:Ee}),r.a.createElement(i.b,{exact:!0,path:"/Login",component:he})))};a(448);var ye=function(){return r.a.createElement(be,null)};a(449);c.a.render(r.a.createElement(ye,null),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.85429075.chunk.js.map